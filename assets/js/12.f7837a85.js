(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{380:function(t,s,v){t.exports=v.p+"assets/img/9.7051fed3.png"},504:function(t,s,v){t.exports=v.p+"assets/img/10.0e995e87.png"},505:function(t,s,v){t.exports=v.p+"assets/img/11.c1db4a3e.png"},506:function(t,s,v){t.exports=v.p+"assets/img/12.87654042.png"},507:function(t,s,v){t.exports=v.p+"assets/img/13.938c21c5.png"},508:function(t,s,v){t.exports=v.p+"assets/img/14.a5c14c58.png"},509:function(t,s,v){t.exports=v.p+"assets/img/15.c91f7424.png"},726:function(t,s,v){"use strict";v.r(s);var a=v(37),_=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),a("ul",[a("li",[t._v("对称加密：指加密和解密都使用的是相同的密钥")]),t._v(" "),a("li",[t._v("非对称加密：非对称加密算法有 A、B 两把密钥，如果你用 A 密钥来加密，那么只能使用 B 密钥来解密；\n反过来，如果你要 B 密钥来加密，那么只能用 A 密钥来解密。公钥是公开的，私钥是只有服务器才知道的。")]),t._v(" "),a("li",[t._v("数字证书：服务端站点的公钥 + 服务端站点的基础信息 + CA私钥加密信息摘要 得到的"),a("code",[t._v("数字签名")]),t._v("，三者组成"),a("code",[t._v("数字证书")])])]),t._v(" "),a("p",[a("img",{attrs:{src:v(380),alt:"数字证书"}})]),t._v(" "),a("h2",{attrs:{id:"安全层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安全层"}},[t._v("#")]),t._v(" 安全层")]),t._v(" "),a("p",[t._v("HTTP传输的内容被中间人窃取、伪造和篡改。传输过程中无安全性。因此在TCP和HTTP之间插入一个"),a("code",[t._v("安全层")]),t._v(". 所有经过安全层的数据都会被加密或者解密")]),t._v(" "),a("img",{staticStyle:{width:"60%"},attrs:{src:v(504)}}),t._v(" "),a("p",[t._v("安全层有两个主要的职责：对发起 HTTP 请求的数据进行"),a("code",[t._v("加密操作")]),t._v("和对接收到 HTTP 的内容进行"),a("code",[t._v("解密操作")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"对称加密"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对称加密"}},[t._v("#")]),t._v(" 对称加密")]),t._v(" "),a("ol",[a("li",[t._v("浏览器发送 "),a("code",[t._v("加密套件列表")]),t._v("和"),a("code",[t._v("client-random随机数")])]),t._v(" "),a("li",[t._v("服务端从加密套件列表取一个加密套件，并生机"),a("code",[t._v("service-random随机数")])]),t._v(" "),a("li",[t._v("将 client-random 和 service-random 混合起来生成一个密钥 master secret，有了密钥 master secret , 双方就可以进行数据的加密传输了")])]),t._v(" "),a("p",[a("img",{attrs:{src:v(505),alt:"secret"}})]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("加密套件是指加密的方法，加密套件列表就是指浏览器能支持多少种加密方法列表")])]),t._v(" "),a("h2",{attrs:{id:"缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),a("p",[t._v("加密套件和随机数是明文的")]),t._v(" "),a("h2",{attrs:{id:"非对称加密"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密"}},[t._v("#")]),t._v(" 非对称加密")]),t._v(" "),a("ol",[a("li",[t._v("浏览器发送 "),a("code",[t._v("加密套件列表")])]),t._v(" "),a("li",[t._v("服务端从加密套件列表取一个加密套件，并返回公钥")]),t._v(" "),a("li",[t._v("进行通信。公钥加密，私钥解密；私钥加密，公钥解密")])]),t._v(" "),a("p",[a("img",{attrs:{src:v(506),alt:"secret"}})]),t._v(" "),a("h2",{attrs:{id:"缺点-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点-2"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),a("ol",[a("li",[t._v("非对称加密效率太低")]),t._v(" "),a("li",[t._v("无法保证服务器发送给浏览器的数据安全。黑客可以截获数据，通过公钥解密，然后篡改信息再返回给客户端。")])]),t._v(" "),a("h2",{attrs:{id:"添加数字证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加数字证书"}},[t._v("#")]),t._v(" 添加数字证书")]),t._v(" "),a("p",[t._v("数字证书有两个作用")]),t._v(" "),a("ol",[a("li",[t._v("数字证书向浏览器证明服务器的身份")]),t._v(" "),a("li",[t._v("数字证书里面包含了服务器公钥")])]),t._v(" "),a("p",[a("img",{attrs:{src:v(507),alt:"secret"}})]),t._v(" "),a("ol",[a("li",[t._v("浏览器发送 对称加密套件列表，非对称加密套件列表，client-random随机数")]),t._v(" "),a("li",[t._v("服务端返回 对称加密套件，非对称加密套件，service-random随机数，以及 数字证书")]),t._v(" "),a("li",[t._v("浏览器 验证 数字证书")]),t._v(" "),a("li",[t._v("浏览器保存 公钥，并生成 "),a("code",[t._v("pre-master随机数")]),t._v(", 用公钥对pre-master加密，并发送给服务端")]),t._v(" "),a("li",[t._v("服务端用私钥解密 pre-master")]),t._v(" "),a("li",[t._v("浏览器和服务端 用 client-random + service-random + pre-master 生成对称密钥 master-secret")]),t._v(" "),a("li",[t._v("进行通信。用对称密钥进行加解密")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("重要的就是这个pre-master随机数, 黑客获取不到, 所以才保证了加密的可靠性!!!")])]),t._v(" "),a("h2",{attrs:{id:"如何申请数字证书-了解即可"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何申请数字证书-了解即可"}},[t._v("#")]),t._v(" 如何申请数字证书？(了解即可)")]),t._v(" "),a("p",[a("img",{attrs:{src:v(380),alt:"数字证书"}})]),t._v(" "),a("ol",[a("li",[t._v("服务端站点人员 填写表单(包含：服务端站点公钥、站点资料、公司资料等)")]),t._v(" "),a("li",[t._v("CA机构审核表单")]),t._v(" "),a("li",[t._v("对表单明文资料 Hash 计算，得出 信息摘要")]),t._v(" "),a("li",[t._v("CA私钥 加密 信息摘要，得出 数字签名")]),t._v(" "),a("li",[t._v("返回包含 公钥、基本信息、数字签名的 数字证书")])]),t._v(" "),a("h2",{attrs:{id:"浏览器如何验证数字证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器如何验证数字证书"}},[t._v("#")]),t._v(" 浏览器如何验证数字证书？")]),t._v(" "),a("ol",[a("li",[t._v("验证证书的有效期。证书里面就含有证书的有效期, 浏览器只需要判断当前时间是否在证书的有效期范围内即可.")])]),t._v(" "),a("img",{staticStyle:{width:"50%"},attrs:{src:v(508)}}),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("验证数字证书 是否被吊销。了解即可")]),t._v(" "),a("li",[t._v("验证数字证书 是否是CA机构颁发的。\n"),a("ul",[a("li",[t._v("浏览器利用证书原始信息 Hash 计算，得出信息摘要")]),t._v(" "),a("li",[t._v("用"),a("strong",[t._v("CA的公钥")]),t._v("解密 数字证书中的数字签名，解密出来的也是信息摘要")]),t._v(" "),a("li",[t._v("比较两个信息摘要是否相等\n"),a("img",{attrs:{src:v(509),alt:"ca"}})])])])]),t._v(" "),a("h2",{attrs:{id:"如何保证浏览端接收到的公钥是来自服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何保证浏览端接收到的公钥是来自服务端"}},[t._v("#")]),t._v(" 如何保证浏览端接收到的公钥是来自服务端？")]),t._v(" "),a("p",[t._v("数字证书由：服务器公钥、服务器信息、数字签名服务器把数字证书传输给浏览器，浏览器从数字证书拿到服务器的公钥，从中获取服务器的公钥")]),t._v(" "),a("h2",{attrs:{id:"浏览器是怎么获取到-ca-公钥的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器是怎么获取到-ca-公钥的"}},[t._v("#")]),t._v(" 浏览器是怎么获取到 CA 公钥的？")]),t._v(" "),a("p",[t._v("你部署 HTTP 服务器的时候，除了部署当前的数字证书之外，还需要部署 CA 机构的数字证书\n极客时间服务器就有了两个数字证书")]),t._v(" "),a("ol",[a("li",[t._v("给极客时间域名的数字证书")]),t._v(" "),a("li",[t._v("给极客时间签名的 CA 机构的数字证书")])]),t._v(" "),a("p",[t._v("在建立 HTTPS 链接时，"),a("code",[t._v("服务器会将这两个证书一同发送给浏览器")]),t._v("，于是浏览器就可以获取到 CA 的公钥了")]),t._v(" "),a("h2",{attrs:{id:"面试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#面试"}},[t._v("#")]),t._v(" 面试")]),t._v(" "),a("p",[t._v("https的加密原理：对称加密TLS握手后的消息传输；非对称加密生成对称加密的密钥以及数字证书的相关处理 （这种问法不大好，哪有啥加密原理？）")]),t._v(" "),a("p",[t._v("SSL握手过程：见上面 添加数字证书")]),t._v(" "),a("p",[t._v("参考：\n"),a("a",{attrs:{href:"https://github.com/LinDaiDai/niubility-coding-js/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTPS%E9%9D%A2%E8%AF%95%E9%97%AE%E7%AD%94.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://time.geekbang.org/column/article/180213",target:"_blank",rel:"noopener noreferrer"}},[t._v("极客时间"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=_.exports}}]);