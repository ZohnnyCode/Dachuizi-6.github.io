(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{603:function(s,t){s.exports="data:image/png;base64,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"},604:function(s,t,a){s.exports=a.p+"assets/img/36.09b4ff5c.png"},605:function(s,t,a){s.exports=a.p+"assets/img/37.002dc270.png"},606:function(s,t,a){s.exports=a.p+"assets/img/38.6adcd121.png"},607:function(s,t){s.exports="data:image/png;base64,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"},770:function(s,t,a){"use strict";a.r(t);var n=a(37),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),n("p",[s._v("STAR：Situation（情景），Task（任务），Action（行动）和 Result（结果）")]),s._v(" "),n("p",[s._v("XXX 项目出现 XXX 问题，我作为 XXX，负责其中的 XXX 部分，我通过 XXX 方式（或技术方案）成功解决了该问题，使 XXX 提高了 XXX，XXX 增长了 XXX")]),s._v(" "),n("p",[s._v("在项目经历描述中，通过交代清楚你在团队中的位置，以及大略描述你在团队中起到的作用")])]),s._v(" "),n("p",[s._v("微前端特性：")]),s._v(" "),n("ul",[n("li",[s._v("📦 基于 single-spa 封装，提供了更加开箱即用的 API。")]),s._v(" "),n("li",[s._v("📱 技术栈无关，任意技术栈的应用均可 使用/接入，不论是 React/Vue/Angular/JQuery 还是其他等框架。")]),s._v(" "),n("li",[s._v("💪 HTML Entry 接入方式，让你接入微应用像使用 iframe 一样简单。")]),s._v(" "),n("li",[s._v("🛡​ 样式隔离，确保微应用之间样式互相不干扰。")]),s._v(" "),n("li",[s._v("🧳 JS 沙箱，确保微应用之间 全局变量/事件 不冲突。")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://qiankun.umijs.org/zh/api#registermicroappsapps-lifecycles",target:"_blank",rel:"noopener noreferrer"}},[s._v("qiankun"),n("OutboundLink")],1),s._v("使用：")]),s._v(" "),n("ol",[n("li",[s._v("主应用：")])]),s._v(" "),n("ul",[n("li",[s._v("registerMicroApps(apps, lifeCycles?): 注册微应用的基础配置信息。当浏览器 url 发生变化时，会自动检查每一个微应用注册的 activeRule 规则，符合规则的应用将会被自动激活。")]),s._v(" "),n("li",[s._v("start(opts?)：启动 qiankun")]),s._v(" "),n("li",[s._v("initGlobalState(state)：定义全局状态。建议在主应用使用，微应用通过 props 获取通信方法")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("微应用")])]),s._v(" "),n("ul",[n("li",[s._v("RegistrableApp注册子应用时，使用props参数，主应用将数据传递给子应用。")])]),s._v(" "),n("h2",{attrs:{id:"场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[s._v("#")]),s._v(" 场景")]),s._v(" "),n("p",[s._v("后台项目多，需要到A项目才能看到A1内容，到B项目才能看到B1内容。使用微前端项目统一接入各个后台项目，通过配置，能直接在微前端项目快速访问各个后台业务。微前端项目由运营支撑部开发维护，我负责cms后台接入微前端。")]),s._v(" "),n("h2",{attrs:{id:"实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[s._v("#")]),s._v(" 实现")]),s._v(" "),n("h2",{attrs:{id:"_1-动态路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-动态路由"}},[s._v("#")]),s._v(" 1. 动态路由")]),s._v(" "),n("p",[s._v("根据配置，后端返回菜单的数据。一个菜单下可以有多个子菜单，树形结构。"),n("code",[s._v("userShow")]),s._v("字段表示菜单是否显示。")]),s._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[s._v("DETAILS")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1612858")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"systemId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"课程管理"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"detail"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"level"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"order"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"icon"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cms_book"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"parentId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modules"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1612859")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"systemId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"课程管理"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"detail"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/cms/course/courseManage"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"level"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"order"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"icon"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"parentId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1612858")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modules"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"userShow"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1612860")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"systemId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"画作工具库"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"detail"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/cms/course/drawToolLib"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"level"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"order"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"icon"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"parentId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1612858")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modules"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"userShow"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"userShow"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])])]),s._v(" "),n("p",[s._v("递归渲染")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template v"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"(value, index) in menuData"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 有子菜单")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("el"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("submenu v"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value.modules && value.modules.length && isShow(value)"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value.id"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("index"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"`${value.id}`"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template slot"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"title"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("menuTitle "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("menu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tree"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("menu "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("menu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value.modules"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("el"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("submenu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 无子菜单")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("el"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("menu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("item v"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isShow(value)"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value.detail"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("index"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"addPathPrefix(value.detail)"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("menuTitle "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("menu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("el"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("menu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("item"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h2",{attrs:{id:"_2-消息通信"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-消息通信"}},[s._v("#")]),s._v(" 2. 消息通信")]),s._v(" "),n("ol",[n("li",[s._v("initGlobalState. 官方提供的接口.")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 主应用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" onGlobalStateChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" setGlobalState "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initGlobalState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'qiankun'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 主应用监听数据")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("onGlobalStateChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prev")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[onGlobalStateChange - master]:'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setGlobalState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ignore")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 子应用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("storeTest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("storeTest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 子应用监听数据")]),s._v("\n  props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("onGlobalStateChange "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n    props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("onGlobalStateChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prev")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("[onGlobalStateChange - ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("]:")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 子应用修改数据")]),s._v("\n  props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setGlobalState "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n    props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setGlobalState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("ignore")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("p",[n("img",{attrs:{src:a(603),alt:"initGlobalState"}})]),s._v(" "),n("p",[s._v("父应用和子应用都监听了"),n("code",[s._v("{ ignore: 'master', user: { name: 'master', }, }")]),s._v("对象, 子应用修改监听的数据, 触发了主应用和子应用的回调. 本质上和eventEmit是一样的.")]),s._v(" "),n("ul",[n("li",[s._v("优点: 有qiankun官方支持, 使用简单")]),s._v(" "),n("li",[s._v("缺点: 子应用需要先了解监听的数据池, 再进行通信; 容易出现状态混乱(不知道谁改的数据)")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("父应用注册子应用是可通过"),n("code",[s._v("props")]),s._v("向子应用传递数据。可以传父应用的store对象, 传给子应用, 子应用再调用"),n("code",[s._v("store.dispatch")]),s._v(", 通知父应用.")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 传入到子应用的数据")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" initData "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户相关信息")]),s._v("\n  store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("menus")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" menuData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("menus"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 菜单")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("resources")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" menuData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("resources"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限code")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("props")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" initData\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("注意了，这里把主应用的"),n("code",[s._v("store")]),s._v("对象传出去了，子应用拿到主应用的"),n("code",[s._v("store")]),s._v("对象，需要时执行"),n("code",[s._v("store.dispatch")]),s._v("，主应用通过"),n("code",[s._v("Vuex：Action --\x3e Mutation")]),s._v("的形式来修改数据即可。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这部分代码在子应用中执行。事实上，为了避免子应用们代码冗余，会把这部分逻辑封装到Npm包中，抛出函数给子应用使用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("moduleId")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" detail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("redPointNum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" count\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nstore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redPoint/setCounts'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_3-注册子应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-注册子应用"}},[s._v("#")]),s._v(" 3. 注册子应用")]),s._v(" "),n("p",[s._v("先初始化主应用，再在主应用中注册子应用。")]),s._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[s._v("DETAILS")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取子应用列表")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("appCode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cms"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("appName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cms"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1280077660296974336"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("route")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/cms"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("siteUrl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//manager-test.61info.cn/index.html"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("versionAddress")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//manager-test.61info.cn/index.html"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("versionCode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("versionName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("weight")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// render.tsx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("appContent")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loading")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" boolean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Vue "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" render "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("app")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Vue\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" appContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" loading "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appContent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" loading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" app\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.tsx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("activeRule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("routerPrefix")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" any "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("location")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hash"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("slice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("startsWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("routerPrefix"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 实例化主应用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("appContent")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("loading")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setApps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" appsData "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetchUserApps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("list "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取到用户的菜单和权限")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" menuData "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" MenuStore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetchMenus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 传入到子应用的数据")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" initData "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("menus")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" menuData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("menus"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 菜单列表")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("resources")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" menuData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("resources"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按钮权限code列表")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" microAppSettings "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" appsData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reduce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" app")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("appName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("siteUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("container")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#appContainer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("props")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" initData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("activeRule")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("activeRule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" list\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   \n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerMicroApps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("microAppSettings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("prefetch")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setApps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("h2",{attrs:{id:"_4-接入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-接入"}},[s._v("#")]),s._v(" 4. 接入")]),s._v(" "),n("p",[s._v("微应用需要在自己的入口 js (通常就是你配置的 webpack 的 entry js) 导出 "),n("code",[s._v("bootstrap")]),s._v("、"),n("code",[s._v("mount")]),s._v("、"),n("code",[s._v("unmount")]),s._v(" 三个生命周期钩子，以供主应用在适当的时机调用")]),s._v(" "),n("ul",[n("li",[s._v("bootstrap: 只会在子应用初始化的时候调用一次，再进入子应用时，不会再次触发")]),s._v(" "),n("li",[s._v("mount: 每次进入都会调用 mount 方法，这里触发应用的渲染方法")]),s._v(" "),n("li",[s._v("unmount: 应用每次 切出/卸载 会调用的方法，通常在这里我们会卸载微应用的应用实例")])]),s._v(" "),n("p",[s._v("register函数，为子应用提供注册。兼容qiankun和非qiankun下的独立运行。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 子应用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("el")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#app'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("h")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$destroy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下面的代码封装到npm供子应用们使用")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("appRender")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("Function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'please run register method to init app'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("props"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" MicroParams")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" Function"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("conf")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" MicroConf "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Function "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\toptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" conf\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// appRender()返回一个函数，包含卸载微应用的逻辑")]),s._v("\n  appRender "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" render\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("__POWERED_BY_QIANKUN__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" params "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getParams")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 自动更新本地缓存")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("accessToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'accessToken'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("accessToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'loginInfo'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("microProps")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("MicroParams "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("assign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("menus")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("resources")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("microProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("props")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" MicroParams")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\toptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mount "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  unmountAppCallback "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("appRender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("unmount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// options.unmount && options.unmount()")]),s._v("\n\tunmountAppCallback "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("unmountAppCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'child app unmount'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("h2",{attrs:{id:"qiankun"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qiankun"}},[s._v("#")]),s._v(" qiankun")]),s._v(" "),n("p",[s._v("HTML Entry 是由"),n("code",[s._v("import-html-entry")]),s._v("库实现的，通过 http 请求加载指定地址的首屏内容即 html 页面，然后解析这个 html 模版得到 template, scripts , entry, styles")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 经过处理的脚本，link、script 标签都被注释掉了"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  scripts"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("脚本的http地址 或者 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" async"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" xx "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" 或者 代码块"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  styles"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("样式的http地址"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n \tentry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 入口脚本的地址，要不是标有 entry 的 script 的 src，要不就是最后一个 script 标签的 src\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("然后远程加载 styles 中的样式内容，将 template 模版中注释掉的 link 标签替换为相应的 style 元素。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(604),alt:"html entry"}})]),s._v(" "),n("ol",[n("li",[s._v("为什么要用微前端？")])]),s._v(" "),n("p",[s._v("使用微前端项目统一接入各个后台项目，通过配置，能直接在微前端项目快速访问各个后台业务")]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("怎么处理样式隔离？")])]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_shadow_DOM",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shadow DOM"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("scopedCSS")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://qiankun.umijs.org/zh/api#startopts",target:"_blank",rel:"noopener noreferrer"}},[s._v("start(opts?)"),n("OutboundLink")],1),s._v(" API有个"),n("code",[s._v("sandbox")]),s._v("属性, "),n("code",[s._v("boolean | { strictStyleIsolation?: boolean, experimentalStyleIsolation?: boolean }")])]),s._v(" "),n("p",[s._v("当配置为 { strictStyleIsolation: true } 时表示开启严格的样式隔离模式。这种模式下 qiankun 会为每个微应用的容器包裹上一个 shadow dom 节点，从而确保微应用的样式不会对全局造成影响")]),s._v(" "),n("p",[s._v("当 experimentalStyleIsolation 被设置为 true 时，qiankun 会改写子应用所添加的样式为所有样式规则增加一个特殊的选择器规则来限定其影响范围，因此改写后的代码会表达类似为如下结构")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 假设应用名是 react16")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  font"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("size"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 14px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("qiankun"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("react16"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("app"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  font"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("size"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 14px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"_3-怎么处理js隔离"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-怎么处理js隔离"}},[s._v("#")]),s._v(" 3. 怎么处理JS隔离？")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" useLooseSandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" sandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'object'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("sandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// src/sandbox/index.ts")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createSandboxContainer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("appName")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("elementGetter")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" HTMLElement "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ShadowRoot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("scopedCSS")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" boolean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  useLooseSandbox"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" boolean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  excludeAssetFilter"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("url")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" boolean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  globalContext"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("sandbox")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" SandBox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    sandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" useLooseSandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LegacySandbox")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" globalContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxySandbox")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" globalContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    sandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SnapshotSandbox")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("浏览器不支持Proxy，使用"),n("code",[s._v("SnapshotSandbox")]),s._v("快照沙箱；支持Proxy的话，默认使用"),n("code",[s._v("ProxySandbox")]),s._v("。如果sandbox配置loose，才用"),n("code",[s._v("LegacySandbox")]),s._v("沙箱，不过官方文档没有loose的说明。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(605),alt:"proxy_sandbox"}})]),s._v(" "),n("h3",{attrs:{id:"snapshotsandbox快照沙箱"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#snapshotsandbox快照沙箱"}},[s._v("#")]),s._v(" SnapshotSandbox快照沙箱")]),s._v(" "),n("ol",[n("li",[s._v("激活时保存window快照信息到windowSnapshot，modifyPropsMap保存激活期间修改的信息，")]),s._v(" "),n("li",[s._v("如果modifyPropsMap有数据，需要把window还原到上次的状态；激活期间可以修改window的数据；")]),s._v(" "),n("li",[s._v("退出激活状态，对比window和快照windowSnapshot，把修改的信息存到modifyPropsMap，并还原window的状态，即windowSanpshot的状态")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("iter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" prop "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SnapshotSandbox")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifyPropsMap "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 激活沙箱")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("active")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 缓存active状态的window")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("windowSnapshot "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("iter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("windowSnapshot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifyPropsMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("p")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifyPropsMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 退出沙箱")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("inactive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("iter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("windowSnapshot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 记录变更")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifyPropsMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 还原window")]),s._v("\n        window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("windowSnapshot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("p",[s._v("snapshotSandbox会污染全局window，但是可以支持不兼容Proxy的浏览器")]),s._v(" "),n("h3",{attrs:{id:"legacysandbox"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#legacysandbox"}},[s._v("#")]),s._v(" LegacySandbox")]),s._v(" "),n("p",[s._v("LegacySandbox使用三次参数来记录，实现消息JS沙箱")]),s._v(" "),n("ul",[n("li",[s._v("addedPropsMapInSandbox: 记录新增的属性全局")]),s._v(" "),n("li",[s._v("modifiedPropsOriginalValueMapInSandbox：记录修改的属性的初始值。")]),s._v(" "),n("li",[s._v("currentUpdatedPropsValueMap：记录激活状态下修改属性的最终值，即属性多次修改，记录最后一次修改的数据")])]),s._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[s._v("DETAILS")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Legacy")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 沙箱期间新增的全局变量")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addedPropsMapInSandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 沙箱期间更新的全局变量")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifiedPropsOriginalValueMapInSandbox "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 持续记录更新的(新增和修改的)全局变量的 map，用于在任意时刻做 snapshot")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("currentUpdatedPropsValueMap "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" rawWindow "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" fakeWindow "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" proxy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fakeWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果是激活状态")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断当前window上存不存在该属性")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("rawWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 记录新增值")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addedPropsMapInSandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifiedPropsOriginalValueMapInSandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 记录更新值的初始值")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" originValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" rawWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifiedPropsOriginalValueMapInSandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" originValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 纪录此次修改的属性")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("currentUpdatedPropsValueMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将设置的属性和值赋给了当前window，还是污染了全局window变量")]),s._v("\n          rawWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" rawWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("active")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 还原上次修改的值")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("currentUpdatedPropsValueMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("currentUpdatedPropsValueMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("inactive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将更新值的初始值还原给window")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifiedPropsOriginalValueMapInSandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modifiedPropsOriginalValueMapInSandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将新增的值删掉")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addedPropsMapInSandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br")])])]),s._v(" "),n("p",[s._v("同样会对window造成污染，但是性能比快照沙箱好，不用遍历window对象")]),s._v(" "),n("h3",{attrs:{id:"proxysandbox代理沙箱"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxysandbox代理沙箱"}},[s._v("#")]),s._v(" ProxySandbox代理沙箱")]),s._v(" "),n("ul",[n("li",[s._v("激活沙箱后，每次对window取值的时候，先从自己沙箱环境的fakeWindow里面找，如果不存在，就从rawWindow(外部的window)里去找；")]),s._v(" "),n("li",[s._v("当对沙箱内部的window对象赋值的时候，会直接操作fakeWindow，而不会影响到rawWindow\n"),n("img",{attrs:{src:a(606),alt:"proxySandbox"}})])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxySandbox")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" rawWindow "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" fakeWindow "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" proxy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fakeWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" value "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" prop "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" target "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" rawWindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" value\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// set代理应当返回一个布尔值。严格模式下，set代理如果没有返回true，就会报错")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("prop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" proxy\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("active")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("inactive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sandboxRunning "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 测试")]),s._v("\n  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'男'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" proxy1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxySandbox")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" proxy2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProxySandbox")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("window")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("active")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'修改前proxy1的sex'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'女'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'修改后proxy1的sex'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("proxy1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'外部window.sex=>1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("window")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("active")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'修改前proxy2的sex'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'111'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'修改后proxy2的sex'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("proxy2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'外部window.sex=>2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br")])]),n("p",[n("img",{attrs:{src:a(607),alt:"proxy"}})]),s._v(" "),n("p",[s._v("不会污染全局window，支持多个子应用同时加载。六一工作台的微前端JS隔离是用ProxySandbox方案")]),s._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),n("p",[s._v("参考:\n"),n("a",{attrs:{href:"https://juejin.cn/post/6885211340999229454#heading-39",target:"_blank",rel:"noopener noreferrer"}},[s._v("微前端框架 之 qiankun 从入门到源码分析"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6885212507837825038#heading-3",target:"_blank",rel:"noopener noreferrer"}},[s._v("HTML Entry 源码分析"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6981374562877308936",target:"_blank",rel:"noopener noreferrer"}},[s._v("说说微前端JS沙箱实现的几种方式"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6920110573418086413#heading-0",target:"_blank",rel:"noopener noreferrer"}},[s._v("15分钟快速理解qiankun的js沙箱原理及其实现"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);