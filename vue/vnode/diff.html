<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>patch | Zohnny前端小册</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Zohnny前端小册">
    
    <link rel="preload" href="/assets/css/0.styles.9a0b0289.css" as="style"><link rel="preload" href="/assets/js/app.e8c3aa62.js" as="script"><link rel="preload" href="/assets/js/2.1d5e0d04.js" as="script"><link rel="preload" href="/assets/js/9.0c30cda9.js" as="script"><link rel="prefetch" href="/assets/js/10.0bc17075.js"><link rel="prefetch" href="/assets/js/100.194dcfa0.js"><link rel="prefetch" href="/assets/js/101.f8977d49.js"><link rel="prefetch" href="/assets/js/102.68d460f2.js"><link rel="prefetch" href="/assets/js/103.3ac580e7.js"><link rel="prefetch" href="/assets/js/104.9d4751c7.js"><link rel="prefetch" href="/assets/js/105.a5f0c700.js"><link rel="prefetch" href="/assets/js/106.e56dcf3c.js"><link rel="prefetch" href="/assets/js/107.1f1c30b4.js"><link rel="prefetch" href="/assets/js/108.68ca0fc6.js"><link rel="prefetch" href="/assets/js/109.50ce68c2.js"><link rel="prefetch" href="/assets/js/11.979bcc85.js"><link rel="prefetch" href="/assets/js/110.f56975a0.js"><link rel="prefetch" href="/assets/js/111.52d900c7.js"><link rel="prefetch" href="/assets/js/112.00424531.js"><link rel="prefetch" href="/assets/js/113.ea237985.js"><link rel="prefetch" href="/assets/js/114.57f07f83.js"><link rel="prefetch" href="/assets/js/115.ec061508.js"><link rel="prefetch" href="/assets/js/116.944ac05b.js"><link rel="prefetch" href="/assets/js/117.51a3bd3d.js"><link rel="prefetch" href="/assets/js/118.b1708a32.js"><link rel="prefetch" href="/assets/js/119.547f729e.js"><link rel="prefetch" href="/assets/js/12.f7837a85.js"><link rel="prefetch" href="/assets/js/120.77b77710.js"><link rel="prefetch" href="/assets/js/121.a6f28bc6.js"><link rel="prefetch" href="/assets/js/13.8e015820.js"><link rel="prefetch" href="/assets/js/14.34a558be.js"><link rel="prefetch" href="/assets/js/15.60fac476.js"><link rel="prefetch" href="/assets/js/16.be05c3ca.js"><link rel="prefetch" href="/assets/js/17.f8c4932c.js"><link rel="prefetch" href="/assets/js/18.5e0519af.js"><link rel="prefetch" href="/assets/js/19.db909a84.js"><link rel="prefetch" href="/assets/js/20.8cc2df06.js"><link rel="prefetch" href="/assets/js/21.f4b0b435.js"><link rel="prefetch" href="/assets/js/22.d559c9b3.js"><link rel="prefetch" href="/assets/js/23.74ba9f22.js"><link rel="prefetch" href="/assets/js/24.2a4117e9.js"><link rel="prefetch" href="/assets/js/25.73c08c20.js"><link rel="prefetch" href="/assets/js/26.c19cc994.js"><link rel="prefetch" href="/assets/js/27.81cd809b.js"><link rel="prefetch" href="/assets/js/28.6791b309.js"><link rel="prefetch" href="/assets/js/29.391ab5ba.js"><link rel="prefetch" href="/assets/js/3.1efbb513.js"><link rel="prefetch" href="/assets/js/30.0b1d7a71.js"><link rel="prefetch" href="/assets/js/31.1f2bb083.js"><link rel="prefetch" href="/assets/js/32.cae2775b.js"><link rel="prefetch" href="/assets/js/33.1e9405be.js"><link rel="prefetch" href="/assets/js/34.9210faf9.js"><link rel="prefetch" href="/assets/js/35.2ac222fd.js"><link rel="prefetch" href="/assets/js/36.c1aa7d10.js"><link rel="prefetch" href="/assets/js/37.47ed6a00.js"><link rel="prefetch" href="/assets/js/38.0743fb65.js"><link rel="prefetch" href="/assets/js/39.f1abc33e.js"><link rel="prefetch" href="/assets/js/4.c29c9b60.js"><link rel="prefetch" href="/assets/js/40.4c2c9b8b.js"><link rel="prefetch" href="/assets/js/41.f38fd71e.js"><link rel="prefetch" href="/assets/js/42.59cc5e7a.js"><link rel="prefetch" href="/assets/js/43.54713365.js"><link rel="prefetch" href="/assets/js/44.cc7cdb87.js"><link rel="prefetch" href="/assets/js/45.cdc6ea0c.js"><link rel="prefetch" href="/assets/js/46.2ab8048b.js"><link rel="prefetch" href="/assets/js/47.f6a00ea3.js"><link rel="prefetch" href="/assets/js/48.8349de8f.js"><link rel="prefetch" href="/assets/js/49.98c2ddda.js"><link rel="prefetch" href="/assets/js/5.40944f1c.js"><link rel="prefetch" href="/assets/js/50.425c325b.js"><link rel="prefetch" href="/assets/js/51.b4870e91.js"><link rel="prefetch" href="/assets/js/52.aef0d698.js"><link rel="prefetch" href="/assets/js/53.e07d00ac.js"><link rel="prefetch" href="/assets/js/54.b7687687.js"><link rel="prefetch" href="/assets/js/55.65cf97ed.js"><link rel="prefetch" href="/assets/js/56.3444efc3.js"><link rel="prefetch" href="/assets/js/57.5377eb7e.js"><link rel="prefetch" href="/assets/js/58.e5099448.js"><link rel="prefetch" href="/assets/js/59.d09bc881.js"><link rel="prefetch" href="/assets/js/6.732df0ed.js"><link rel="prefetch" href="/assets/js/60.eba8f995.js"><link rel="prefetch" href="/assets/js/61.bd8ab09f.js"><link rel="prefetch" href="/assets/js/62.0bd4e7fc.js"><link rel="prefetch" href="/assets/js/63.640df805.js"><link rel="prefetch" href="/assets/js/64.35c8b8f7.js"><link rel="prefetch" href="/assets/js/65.affde9cb.js"><link rel="prefetch" href="/assets/js/66.9f8cabb6.js"><link rel="prefetch" href="/assets/js/67.00890bbe.js"><link rel="prefetch" href="/assets/js/68.0936ba21.js"><link rel="prefetch" href="/assets/js/69.a33cdaf9.js"><link rel="prefetch" href="/assets/js/7.31bb07dc.js"><link rel="prefetch" href="/assets/js/70.1df3e127.js"><link rel="prefetch" href="/assets/js/71.f4124ef5.js"><link rel="prefetch" href="/assets/js/72.01e6c977.js"><link rel="prefetch" href="/assets/js/73.b07f15a4.js"><link rel="prefetch" href="/assets/js/74.f72cdef2.js"><link rel="prefetch" href="/assets/js/75.ee885b7d.js"><link rel="prefetch" href="/assets/js/76.84c918df.js"><link rel="prefetch" href="/assets/js/77.a28fd7f5.js"><link rel="prefetch" href="/assets/js/78.482bfb70.js"><link rel="prefetch" href="/assets/js/79.091c9dbf.js"><link rel="prefetch" href="/assets/js/8.c0da64f7.js"><link rel="prefetch" href="/assets/js/80.df33fddc.js"><link rel="prefetch" href="/assets/js/81.6e6db080.js"><link rel="prefetch" href="/assets/js/82.e9138597.js"><link rel="prefetch" href="/assets/js/83.31c363ff.js"><link rel="prefetch" href="/assets/js/84.1e1be0f3.js"><link rel="prefetch" href="/assets/js/85.c861f43f.js"><link rel="prefetch" href="/assets/js/86.5a205712.js"><link rel="prefetch" href="/assets/js/87.d9dc3fb3.js"><link rel="prefetch" href="/assets/js/88.4297aa82.js"><link rel="prefetch" href="/assets/js/89.0a4430b5.js"><link rel="prefetch" href="/assets/js/90.c95ae974.js"><link rel="prefetch" href="/assets/js/91.ff322a2a.js"><link rel="prefetch" href="/assets/js/92.6272aacc.js"><link rel="prefetch" href="/assets/js/93.f34792ac.js"><link rel="prefetch" href="/assets/js/94.5cd9fa78.js"><link rel="prefetch" href="/assets/js/95.4c0963b8.js"><link rel="prefetch" href="/assets/js/96.4b8520b9.js"><link rel="prefetch" href="/assets/js/97.cdf1abbd.js"><link rel="prefetch" href="/assets/js/98.4d55767c.js"><link rel="prefetch" href="/assets/js/99.0a1d65d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9a0b0289.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Zohnny前端小册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/basic/basic/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  css
</a></div><div class="nav-item"><a href="/browser/theory/" class="nav-link">
  浏览器相关
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  nodejs
</a></div><div class="nav-item"><a href="/babel/" class="nav-link">
  babel
</a></div><div class="nav-item"><a href="/buildTools/webpack/" class="nav-link">
  打包工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/reactive/" class="nav-link">
  响应式
</a></li><li class="dropdown-item"><!----> <a href="/vue/compiler/" class="nav-link">
  模版编译
</a></li><li class="dropdown-item"><!----> <a href="/vue/vnode/" class="nav-link router-link-active">
  虚拟DOM
</a></li><li class="dropdown-item"><!----> <a href="/vue/whole-process/" class="nav-link">
  整体流程
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  Vuex&amp;Vue-router
</a></li></ul></div></div><div class="nav-item"><a href="/mobile/" class="nav-link">
  移动端
</a></div><div class="nav-item"><a href="/code-reviews/" class="nav-link">
  LC
</a></div><div class="nav-item"><a href="/project/B/batch_download.html" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/news/vue3.html" class="nav-link">
  前沿
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://0zcl.github.io/utils-library/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  公共函数库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://0zcl.github.io/h5-sdk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  h5-sdk
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/0zcl/h5_template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  移动端多页面模版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/0zcl/zcl-mobile-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  移动端组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://gitlab.61info.com:8190/zcl/tpc-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zcl脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/Dachuizi-6" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/basic/basic/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  css
</a></div><div class="nav-item"><a href="/browser/theory/" class="nav-link">
  浏览器相关
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  nodejs
</a></div><div class="nav-item"><a href="/babel/" class="nav-link">
  babel
</a></div><div class="nav-item"><a href="/buildTools/webpack/" class="nav-link">
  打包工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/reactive/" class="nav-link">
  响应式
</a></li><li class="dropdown-item"><!----> <a href="/vue/compiler/" class="nav-link">
  模版编译
</a></li><li class="dropdown-item"><!----> <a href="/vue/vnode/" class="nav-link router-link-active">
  虚拟DOM
</a></li><li class="dropdown-item"><!----> <a href="/vue/whole-process/" class="nav-link">
  整体流程
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  Vuex&amp;Vue-router
</a></li></ul></div></div><div class="nav-item"><a href="/mobile/" class="nav-link">
  移动端
</a></div><div class="nav-item"><a href="/code-reviews/" class="nav-link">
  LC
</a></div><div class="nav-item"><a href="/project/B/batch_download.html" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/news/vue3.html" class="nav-link">
  前沿
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://0zcl.github.io/utils-library/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  公共函数库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://0zcl.github.io/h5-sdk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  h5-sdk
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/0zcl/h5_template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  移动端多页面模版
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/0zcl/zcl-mobile-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  移动端组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://gitlab.61info.com:8190/zcl/tpc-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zcl脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/Dachuizi-6" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>虚拟DOM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/vue/vnode/" class="sidebar-heading clickable router-link-active open"><span>虚拟DOM</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue/vnode/" aria-current="page" class="sidebar-link">说一下什么是Virtual DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vnode/#说一下什么是virtual-dom" class="sidebar-link">说一下什么是Virtual DOM</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/#vue2-0引入虚拟-dom-的目的是什么" class="sidebar-link">Vue2.0引入虚拟 DOM 的目的是什么</a></li></ul></li><li><a href="/vue/vnode/diff.html" aria-current="page" class="active sidebar-link">diff算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vnode/diff.html#patch" class="sidebar-link">patch</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/diff.html#根组件首次渲染" class="sidebar-link">根组件首次渲染</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/diff.html#新旧节点的是同一类型的节点" class="sidebar-link">新旧节点的是同一类型的节点</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/diff.html#diff原理总结" class="sidebar-link">diff原理总结</a></li></ul></li><li><a href="/vue/vnode/ssr.html" class="sidebar-link">SSR</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vnode/ssr.html#为什么需要服务端渲染" class="sidebar-link">为什么需要服务端渲染</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/ssr.html#什么是服务端渲染" class="sidebar-link">什么是服务端渲染</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/ssr.html#服务器端渲染有哪些缺点" class="sidebar-link">服务器端渲染有哪些缺点</a></li><li class="sidebar-sub-header"><a href="/vue/vnode/ssr.html#服务器端渲染如何实现" class="sidebar-link">服务器端渲染如何实现</a></li></ul></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="patch"><a href="#patch" class="header-anchor">#</a> patch</h2> <p>虚拟DOM 最核心部分是patch, 它可以将vnode渲染成真实的DOM. patch, 渲染真实DOM时, 并不是暴力覆盖原有DOM, 而是比对新旧两个vnode之间有哪些不同, 根据对比结果找出需要更新的节点进行更新. 故patch实际作用是在现有DOM上进行修改来实现更新视图</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">patch</span><span class="token punctuation">(</span><span class="token parameter">oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> hydrating<span class="token punctuation">,</span> removeOnly</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 新的不存在，删除</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">invokeDestroyHook</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> isInitialPatch <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> insertedVnodeQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token comment">// 老的不存在，新增</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// empty mount (likely as component), create new root element</span>
    isInitialPatch <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token function">createElm</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 两者都存在，更新</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isRealElement <span class="token operator">=</span> <span class="token function">isDef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRealElement <span class="token operator">&amp;&amp;</span> <span class="token function">sameVnode</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 比较两个vnode</span>
      <span class="token function">patchVnode</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> removeOnly<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">invokeInsertHook</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> isInitialPatch<span class="token punctuation">)</span>
  <span class="token keyword">return</span> vnode<span class="token punctuation">.</span>elm
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>分析 <code>patch</code> 方法，两个 <code>vnode</code> 进行对比，结果无非就是三种情况</p> <ol><li>新的不存在，表示要删除旧节点</li> <li>老的不存在，表示要新增节点</li> <li>都存在，进行更新，这里又分成了两种情况</li></ol> <ul><li>其他情况，比如根组件首次渲染</li> <li>不是真实节点，且新旧节点的是同一类型的节点（根据 key 和 tag 等来判断）</li></ul> <h2 id="根组件首次渲染"><a href="#根组件首次渲染" class="header-anchor">#</a> 根组件首次渲染</h2> <p>先来分析下3.1的情况. 举例:</p> <details class="custom-block details"><summary>DETAILS</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token operator">&gt;</span>
  <span class="token constant">I</span> am <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#demo'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ayou'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details> <p>第一次进入到 patch 这个函数的时候是根组件挂载时，此时因为 oldVnode 为 demo 这个<code>真实的DOM元素</code>, 执行emptyNodeAt会通过new Vnode返回一个生成的vnode实例，并vnode.elem = oldVnode， 即把最外层的Dom（#demo）赋给vnode.ele。而createEle中的vnode参数是<code>const vnode = vm._render()</code>模版编译生成的render函数，执行render返回的vnode。我们会走到这里：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isRealElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// either not server-rendered, or hydration failed.</span>
  <span class="token comment">// create an empty node and replace it</span>
  <span class="token comment">// 真实节点转为虚拟节点，并把真实节点放到 oldVnode.elm 上</span>
  oldVnode <span class="token operator">=</span> <span class="token function">emptyNodeAt</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// replacing existing element</span>
<span class="token keyword">const</span> oldElm <span class="token operator">=</span> oldVnode<span class="token punctuation">.</span>elm
<span class="token keyword">const</span> parentElm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">parentNode</span><span class="token punctuation">(</span>oldElm<span class="token punctuation">)</span>

<span class="token comment">// 创建真实的 dom 或者组件并插入到 parentElm</span>
<span class="token function">createElm</span><span class="token punctuation">(</span>
  vnode<span class="token punctuation">,</span>
  insertedVnodeQueue<span class="token punctuation">,</span>
  <span class="token comment">// extremely rare edge case: do not insert if old element is in a</span>
  <span class="token comment">// leaving transition. Only happens when combining transition +</span>
  <span class="token comment">// keep-alive + HOCs. (#4590)</span>
  oldElm<span class="token punctuation">.</span>_leaveCb <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> parentElm<span class="token punctuation">,</span>
  <span class="token comment">// 新的 dom 会放到旧的 dom 的后面，所以有一瞬间两者都会存在</span>
  <span class="token comment">// 这样的好处是第一次渲染可以避免对 children 进行无谓的 diff，当然这种做法仅适用于 hydrating 为 false 的时候. hydrating??</span>
  nodeOps<span class="token punctuation">.</span><span class="token function">nextSibling</span><span class="token punctuation">(</span>oldElm<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>做的内容有(createElm下面再分析):</p> <ol><li>将真实节点转为虚拟节点</li> <li>得到旧节点的父元素</li> <li>通过 vnode 创建真实的节点并插入到旧节点的后面，所以有一瞬间会同时存在两个 id 为 demo 的 div</li></ol> <p><img src="data:image/png;base64,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" alt="first-render"></p> <p>先跳过中间 isDef(vnode.parent) 这一段. 这里会执行 removeVnodes 把旧的元素给删除掉，因此界面才最终显示一个id为 demo的 div</p> <h3 id="接下来简要分析下createelm"><a href="#接下来简要分析下createelm" class="header-anchor">#</a> 接下来简要分析下createElm</h3> <p>首先创建了一个 tag 类型的元素，并赋值给 vnode.elm。因为传进来的 vnode 是原生标签，所以最后会走到</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createElm</span> <span class="token punctuation">(</span>
  <span class="token parameter">vnode<span class="token punctuation">,</span>
  insertedVnodeQueue<span class="token punctuation">,</span>
  parentElm<span class="token punctuation">,</span>
  <span class="token operator">...</span></span>
<span class="token punctuation">)</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data
  <span class="token keyword">const</span> children <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children
  <span class="token keyword">const</span> tag <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag
  <span class="token comment">// .....</span>
  vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> vnode<span class="token punctuation">.</span>ns
        <span class="token operator">?</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>ns<span class="token punctuation">,</span> tag<span class="token punctuation">)</span>
        <span class="token operator">:</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
  <span class="token comment">// .....</span>
  <span class="token function">createChildren</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> children<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 事件、属性等等初始化</span>
    <span class="token function">invokeCreateHooks</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 插入节点</span>
  <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>其中 createChildren 中又调用了 createElm：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createChildren</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> children<span class="token punctuation">,</span> insertedVnodeQueue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">checkDuplicateKeys</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">createElm</span><span class="token punctuation">(</span>
        children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
        insertedVnodeQueue<span class="token punctuation">,</span>
        vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token boolean">true</span><span class="token punctuation">,</span>
        children<span class="token punctuation">,</span>
        i
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPrimitive</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nodeOps<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> nodeOps<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>不停递归地调用 createElm, 最后执行 insert(parentElm, vnode.elm, refElm) 的时候，vnode.elm 就是一颗完整的 dom 树了，执行完 insert 以后，这颗树就插入到了 body 之中</p> <h2 id="新旧节点的是同一类型的节点"><a href="#新旧节点的是同一类型的节点" class="header-anchor">#</a> 新旧节点的是同一类型的节点</h2> <details class="custom-block details"><summary>DETAILS</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token constant">I</span> am <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#demo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ayou&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;you&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></details> <p>我们在定时器中对 name 进行了重新赋值，此时会触发组件的更新，最终走到 patch 函数:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRealElement <span class="token operator">&amp;&amp;</span> <span class="token function">sameVnode</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// patch existing root node</span>
  <span class="token comment">// 比较两个vnode</span>
  <span class="token function">patchVnode</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> removeOnly<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>我们去掉一些我们暂时不关心的代码，看看 patchVnode</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">patchVnode</span><span class="token punctuation">(</span>
  <span class="token parameter">oldVnode<span class="token punctuation">,</span>
  vnode<span class="token punctuation">,</span>
  insertedVnodeQueue<span class="token punctuation">,</span>
  ownerArray<span class="token punctuation">,</span>
  index<span class="token punctuation">,</span>
  removeOnly</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVnode <span class="token operator">===</span> vnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
  <span class="token comment">// 获取两个节点孩子节点数组</span>
  <span class="token keyword">const</span> oldCh <span class="token operator">=</span> oldVnode<span class="token punctuation">.</span>children
  <span class="token keyword">const</span> ch <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children
  <span class="token comment">// 属性更新</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isPatchable</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cbs<span class="token punctuation">.</span>update<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> cbs<span class="token punctuation">.</span>update<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">=</span> data<span class="token punctuation">.</span>hook<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isDef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">=</span> i<span class="token punctuation">.</span>update<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">i</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 内部比较</span>
  <span class="token comment">// 新节点不是文本节点</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 都有孩子，进行孩子的更新</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isDef</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCh <span class="token operator">!==</span> ch<span class="token punctuation">)</span>
        <span class="token function">updateChildren</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> removeOnly<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 新的有孩子，老的没孩子</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">checkDuplicateKeys</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> nodeOps<span class="token punctuation">.</span><span class="token function">setTextContent</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
      <span class="token comment">// 批量新增</span>
      <span class="token function">addVnodes</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> ch<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ch<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 老的有孩子，新的没孩子，批量删除</span>
      <span class="token function">removeVnodes</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      nodeOps<span class="token punctuation">.</span><span class="token function">setTextContent</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>text <span class="token operator">!==</span> vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文本节点更新</span>
    nodeOps<span class="token punctuation">.</span><span class="token function">setTextContent</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>patchVnode做了两件事：</p> <ol><li>更新属性. 略？？</li> <li>更新 children 或者更新文本<code>setTextContent</code></li></ol> <p>更新 <code>chidren</code> 有几种情况:</p> <ol><li>新旧节点都有孩子，进行孩子的更新</li> <li>新的有孩子，旧的没有孩子，进行批量添加</li> <li>新的没有孩子，旧的有孩子，进行批量删除</li></ol> <p>新增和删除都比较简单，这里就暂时先不讨论。下面着重分析的是 updateChildren, 也是diff算法的核心.
使用<code>双指针算法</code>来对比新旧两个vnode的children, 找出最小操作补丁.</p> <p><img src="data:image/png;base64,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" alt="patch"></p> <p>在新⽼两组 vnode 节点的左右头尾两侧都有⼀个变量标记，在遍历过程中这⼏个变量都会向中间靠拢。当 oldStartIdx &gt; oldEndIdx 或者 newStartIdx &gt; newEndIdx 时结束循环。以下是遍历规则：
⾸先，oldStartIdx、oldEndIdx 与 newStartIdx、newEndIdx 两两<code>交叉⽐较</code>，共有 4 种情况:</p> <ol><li>oldStartIdx 与 newStartIdx 所对应的 node 是 sameVnode, patchVnode这两个结点。两个头指针各向后移一步</li></ol> <p><img src="data:image/png;base64,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" alt="updateChildren"></p> <ol start="2"><li>oldEndIdx 与 newEndIdx 所对应的 node 是 sameVnode，patchVnode这两个结点。两个尾指针各向后前一步</li></ol> <p><img src="data:image/png;base64,UklGRqwaAABXRUJQVlA4IKAaAAAQeQCdASoJAucAPpFGn0slpCMhorRKgLASCWlu/Fd5M43HcwzB68/+JYaZXTz/jP+w9of9j/LPxI/If2P+p/sd64+NPrK1LPkP19/Af339xvUf/CfmV5g/Kb/E9QL8x/lP+G/sf7tf3r069iDsHmC+yv0v/O/4f8fPP+/n/RH7C/4D3AP5l/S/8p+Yn7///f4V/994pn3v/if8D7gPsB/k/9S/y/+W/J36Zf4L/s/4j/Sftp7Wfzj+2/9b/K/4/5B/5l/Uf+H/ef8372nsJ/dz2UP2Z//5CHUw0ji/fXevdAYFZqldwTcPU94IuSAAXql9cnK7MhbaQmmZ5gJ78wbdT3nKbtGNPgzZtIUvrIGGfe6KgucCa60JmZgrQscdTDRppc4Uz0IXLS3w26n2nzAV2gbt4oPTdEimG3U+1CgmCFBeH7zAGq8lKkqqFXlx4PDIeB8ecFYVUb4qoCsoQIMtY3aW2tGKH+9ciotnwH4U/M+zl2BMI58XRtNZcDIsMrBJAJ5D1jGjCWk4D8vsYyDZ4gsyhVh4Xtp+WMcvdrDmdasXHUyHpEpVCi9jCrlSYNvt9TjZoq6GYwRqskgMDujC+x78T8WplX1M5GmNpda6aWB4UEniQ1PT7+7uAyjpznuIQk3JSYKuhqHxARJP+hPvBoKAyJy5C4BBBZQdarGcLjcOoTDhhD/8Tv6k2LoUi9TySzAEBRYnW9QKv7co/kLs9fn2d4YI3MpFdFKsjRIoZZmnw260ed3v55RcSlTBei8eeLT5g26n2nzBt1PtPmDboMf0l3qfafMG3U+0+YNupYQ2F7Rudg1fX/qnzHQcVomR8Spfh3Beud4384IB6K/MG3U+0+YNup9p8waH+ObfRIhfmDbqZk4MvQETKQY66Re8JWTbBkJMvijwc4jBUHESgIKl8O1YEw4vQADBMEfSJsGN1KZ4vUSKzEyo2XtwlbMLwj+BZzufbpOwUFJufKpJtgAF5AhDDpFneb9+fsuyoAkspG6g1reW3PLaTeIGXTFPjCoNO7wTMyh8yNAzOhTILzKfDboyZLsiEjOsFrWNFaoN7KQVWExTbsxlEiKTX7vk8BmmPqORbXvs2+c8fJ6zmsNwqBRIJAmsodfOIceR7+F1lfzC56n2nzBt1PdI3c3IBfpLt5+ZO9QSbFAidxbTBt1PtL0ytC2n1ZpJL66inh7uIwFowgBlJDRkFIcdS/67Ny8U9ghs9RSjrSKBfmtgrnnWT3GE9+YNup9p7N+JvJZicP93RJwaHCH2Uw26CDQWcb3+JTgbK0mSEhhPfmDOAAD+/x/QmiFavFGlq+ejvarFFxZG5aw8whynyXFuxHR2TPPkobVbKZaGRk9B3Ddov4eoBjSCLyxgbixK42ebQnVvYdayiQCpaz/riQfE/zWqsFsJNr7183WWLg4I1Ra53hGk9qTqKRZYMMcsNdk4h4gPsUC4vG8hgP5ZLmC7V0t2IV2wKTHSXfdw/GHipQuG8uxEV6HUps05LWrKQvQMRIqUrFHsVOplZtmeHF8Lc2KTSg0Vk+8BK5bFdL+mvYWdpG1BWblYRXU9FVIp7/U+UzxHn050JBIJHNvWUd4REE8lljCfhKmxbvi//x7eycAaQYaP4ESodP9tODzKVJvmTu9124YKFnw7bgKcqixZAMZ/rBbk9u/ksUcs2KFI2YhH6A0JBE8FRiXfzfYGWUUwgp4xeu9YwnlJl1G74RPa+ED4QxWyMc9/Jcqw4mv2SNBHQO/9nQZe866kQa3UxlR2Tue+NhykMXbsXP7BT8lzBpmR5RbrC7vDkPGlV9JH2HuvyBLfHBVxObbBuz7X2SPukgQ8hFeZXpOFxr1ZVRor0vOhL1o0XYsGPbOuPysrU4eLZPrf/oMNy2CdX38kMhexhE4tND4WPCbbqFFjP3UlQcJPv0d+5lKZKHXKzSToyHoSgO/FCdGwTa29gV/qonyv0jNbk48GZKB9jikrWTgFdekOSQTqFy1y37/MLI5+OOKfN6iYqJVS6vYkdKYM5gfY3oAD3xbb0FzQ5yWnX9MI2wwmTJ8mAfXlTSZ7aNJnSUgAAMt+phjHWxyvglIRN0cC0gZ/JWhsFaYvA1ovdlMatLPiemsZJhnpMynxwhXtx/ExvrjpfBoX38iJeevyk/xtvH1Qre/BJ/TFArK8eKt7L/Pxq4J+eR7Te+aKX+TDhBubeJ2oJPktb+0U3Bbw+FJvPlrrlQpKexPqIM8ePSY4f/s8u4XQW4QD2LKxhNIKTt7/p1Aqn2pu9R4jE+KRaFOP/UrUoiwOTnq8/bPIadNRvUtORIcIwCC2AfGFfy3gdy76jsoivIMOgW0oxgx3WY7NOymAgfP/1/T7uX/bMruqhd4eko0N//A9NivQDzWJxRg/KPoYIUI8XcL8PdO4nPuYkxGLtrJy9s8B7/k1byReODAvymy3mNpiPhzGo4DrISzfED9qI1+OMm5IGyXqsQWbm0Hb6Dbm38SnfZda7URJLR3OppaK3D8K/fw7fLYrWbki8cGBflNqS+WU2fDmNRwHWQlm+IGLyg7+OMnXAyKrhD9JwKWw4j0BlE/Sw60TyhzJdxOfcxJiMXbWV+ooajLupZPNCXJcPjlReLr9dyeRoniLQuit5B/e4MLVAVY4nbE9LODny3gdy76i1rQw1Omah7uQ9ynV4/Mu8fxaYCd3hgdFs9uqfIP/8D02K9Ci3B/eSY1j0WYYlhsuXVdlrU2sVgb21bruOYow613nVXKPMHo9TteXN+V/yLodIZ54yuxLyfta/ms+jZLyapP0+PeJ9jFKRUmUxhdoWK5TEVPZtEvKNvf46LH8pt7o6pVqJ+GQbAv9cZeezp57YwafLDHbqd/wyGklY7UfKi+smPKwkP+F2Yj+wErWvJLO/LNcOZx5bw4oxVRuvC2lsuVkSYJ7yFz/6ncz9V44KXbN5G9ClqKod6R8WzEuSPka7owBoKojSuBf5g+Ztu2s4AUQWgH+rvZGnzZqukBjesRsroN86Y865vYeAfpj/3v84NUglV9W4UM//B721n+PMDFNFMnyjFKaUu10u0Jjn3nVSwLy5RMvUTCiurgs7lTbggOZD7SpkH0zTCFHv7hIdBtLPkT0BZroApAHYXJDFP2ZNBNrlhbnlB6uiRnraE/H8+cqVaV1ijBZ7XrxvuwCOAFJJlBKd+yzgMttgRBxyfa+B9/yT9IAmlcHDKOPPOKFZD11mHOxxmdvE6h9Xsm0MzS8/kqIsj6G25JPJ7LGkDl8go/o4GSKJzjaMVrzKwHdLISrQRuGkeyKYazt+C61BxHsE+2jSlwLlKaiAkbNh5zCP/oJxZcG9h4XLIh60mY7nktGoup5+U9Bec5aToqnJNeyCfgkDng4+Km+IKYWJGlGQcFRSD2PWS5NxCzMejYokZUiEoF7sNjRfDnxen2aSI+Uo/xF1N84LgxEFA6bL/iOBc1EuSVxNUaReOr2MjY8a+rTy+nRZvswRNDsQ9DCvF+NZetkeDSOJgAKgVai6/H6i+1gDC4uD7UjBKBo9S52uvK8cI1O6KykzDirIf/5v32tCAZVZMZEL10BvfRRrUehC2XUT8q0ibnynVlO302V+FLyIHj27FaQzyk3Bh452ONCQq+wqvvfrXudfjfa8IENf9vHc67yQoCyNFq8Gb+t/UaKfVIA5P47O7y55rNyctPKixuvq9MrLMTdc64cVkt/0kKQAK5gPSvRj8GEKdPXgBaGPSFQ1gnOdxLRWIv2LUbYhtCmfMhZMI3vSYKAbu0GpdqSUYH2yHuxp84PSylc3vLxvNX5WLNOqXP9AJ4NWXghmMEJ+Kfpsb1CFkX/ZgmTNs+A2iqcJ38HKqTTI06Hf70WMGfpS4JsWOqeO0Uu9U3KxyqHqngUg8DVeRM90ZK4lUrZmkhmHpjxlNHkBenx5KcHwO8igsVmOJyKCCHmVir+QEG4J6W7b8Xm38nl9B1zfsXar87HFMqFll0Wx6e+f3wc362yU39m+x16Ch7dZN7+6O0lR93rBYboZRYrJBjP5ja4fDSORYZ7kI3XWot5SUhbdOfTL3ssEeF/F3S6pX1FFRwvSGEnP+5/JwV96N44vKPcSqflCHbiyaZvBPE1XhyjHzwFGPCNjhXe92LKTFur2qqOWJMgXcCI4ybu3vFjJdf/tIfaSq/2FGGEelUuevHdB/7Uw+c6Ur7Gylezu66d4yFXJI3BP++msDGzwudFMO5E2LPBbfyWdDfGeRjyeWH+c+H7K4QQhyqMmgy12QSBEnTsahu2bp0RAjw8ilM8/vZYI8L+Lul1SvqKKjhekJzSpbVBgU1/LTTO/AnFu32Rcuw/Ttfmt5G8JM9XZn40+jHL5LvxclR+dUDInw/wIIYn3LYy9aKKVbrnOsDyirAQIpeGEV1GMBos+pKQpILxZfFxjA03zvGQq7MA/lfA59Ir8cTp9yIiW100K+YLRxhKLURT3qG4zS8VzdMe4Ba6OniGpfZuj00H+KKqCmDW2ERACIRR3wY1doiJeEHKT0rfLhDk8vWqiCcu8Eek2MkBtw8C0EJBtC0MZYbKbPdZDWHG9vAXR2fJDcdrHfll3pSkq0YkpAyAwn0UvbJ40Rxk3dvdmf/x5HpBGIvlctfrhw+kiz+JizdEUR0TnyXDPxBGlK2ELqgbQ+u5rUK/fd81b87qU9Dm3i/9B9DYXRqkutctdJ38ARtgMzL6rtXjGLuXew8Yenu8EnSjSCNHdm4yxaYQKXuhCsbmT8HkAVnDqHSNT4xDn4YWlsFy1qatu0Nn6kopLHIj0CJjPds+8sSnxhM78CcW7fZFy7L+3369Lw1cX7kqPNt16wmt/VcDzNs/3nIXp5a9Kpoib3NAd0tpdQ+iUJ5+QjeQg9yLJdGAFow8oQ54z3dJBjfA4I6f/MIoDQDXmJsg1zqqwfoUpvLQxUjdTkjWamnRQWxY/biMgIUB8OdGCg5YymKGNNSGM4P2E4RcLDNpFPEGwZ/wXg7pE4P8kB1GRmi3IDSA6isD5fqhwQAApm2xmY5TIaCy0XVU5/nQrRbTFNhqMtTYK0S8XN+DngkmUtl0dxN3NsaIEsUY2Cqrbad3Kf7yGI9Ix8+iF5aGVXR9htI1p7I5sIGl9ccaObmeDoZkBb6eke/PWxl9Vh0lhrtkU22aDjlmtLrLRjHtYYsrc35XcNQgr1jjiBv2CymZNJcIUMmyjpIHWbeGnDuVGVMgdeFjPnAXORF+9phUxZZr4ZkzrTxq3lXzq7IfSsaOtuI8UW8GVcvIfQyjGeyz9zLSnuFuZKj5A9OlQm5mqc3Yc4Trx9n/8Jwwy+43Mbp2yZigF/MUX+0o+mpph/d9R0LXS2Etsa7TAKcojCrL5BERtzdlcQ6rfHZTY3u+nP7OAkIhG8eW6adjipM/L8yDvCGgfnMCcAElMgYp72uKV14nDdpk7aVco+X/tH0wyXDmub63TgeGsGAD+etuzvYDs7kPAanubgNt1GvkDnJZs0kPSONQsciCFovivR/xTqR7CLbV37pzMhVVlOVLo9x13l+yG4gxFNT2VBR/bv8ITWfZfaPWxZD43+o3pr1Mr7bc1T2pIEM4ZARaSmz7rPQCvs0A+RcX1r4CifqB/tSez9+9pHPHM+i9/C0uY68XpzeHjsgf+b37JZdFqPh2XUXbVLoXbQCCukJJEiqDT7wizhF4HF7mAj8isNgP7mjYAXYFNlCrHRDpoBBHVP0VgK2MMIdV+q0WyWsbap3WG7CsakDOX0ox2Mu3j1mFPlNRIL+9X0lmRBtb2q7C/VY+7jHLa5PT2ilbVHy7UOiUb+dnjSqZMdmvdcQIwO8FlB6i5ONCUk9mI0FprWAjc3VaS8ITr9OTnhROqr+UX4jZ0uBzsaw2l/Q2uQCQXguwwuiCBtywux8T95kLhmtT/CqAYyfQbyxml4owkvyq/S/aM2L20Hg1iOKko16rMuq5WU60UvaiXk1oFqrzI1Sy2cN7nRLJXntnESYQgijDt8fQ4D6swqT2YjQWmtYCNzdVpE7NRvdOTnhROqr+UX4jaLbHvHX9imnhwdH6+JNS0CU1wibZMmt7b8u+Ui0d+wPEfA/KV1V0ZT/zDY/3+033+94T8u8P0EtupEzHgx4bodIjmThskjnrgoFdT+66HWcsT9c+wWouKoAM0i8L6tFIXrQ5IDfxmDd3+u/1FpHndDzo9j2Ij9Y1z1C5kfks3lEu8AFw1HPo88qNZJ9tGniK5rCfe3EYPW3FLP/szWZPupwO7f2QfgFPmHiu96S5visjln8GsDd34vz+FTzOvppNwro13vYPep+CyWOoz/949u4GIYtAZsSBCuIDMFCbUiNDhi8VOSSgwcuVVpXQJsCHWp2fNUaRI8nO/JzyH7QcqDFz+bGGTx9RnIZEkb5Cr9/y5q+ygu70igonqQ2qp/B5fOShMcVucXiPZHmGna0Lt7CDScTCW/LUBxzzNJQilds6FvgselkcxAH/IiQF+bFRFSapBJO/n1bjtzU1pZQVTOe1lsP1SPg74zcTP/bJO262kq4E3mMZIFoHVN9azJajJXvvVvDuOz7TaxW7sPYJd5nXLBW/qys8NCecoi5atbTrvisjl2KuNk1WzcM1emGv4hMNL4xr2vx7dwUSVZNoIfBaLOex4l/hsK5Xsx1daTfPQ4ETx+krxkL6FsMZFrNBmQ/CAQcKn3HutwQurgVnEjrWDFIYVZmwtbSowZ4DQaICLobCK9wLYeTt1ms5vG/W4ucMKP7MOH8usnKT4r4v9c8PWVp3rQGhp6x+AvV+N3lA4Ri8RsgrauDmHhTTjGrScFh8z3hm7/1CIWpYECY34myuFxJGrrjV6Yxxwnv98+OcSBsoN1766rvQ+0soygB/C2AgjC9sF7jw1wt0W5g76qi2TI4nyxcGtxxZvYTy/52bbBQ9wBIPW/8SBECzm87UfqFx6nn7lS/jy4LCXc8Nxv73of2TeBYPSeOHklxoZ56sGHzsfUMJY+QgA6zmiDOBdgTukKW8KGD3Yv5ZO443etWYV3lPoTQD3z45xIGyg3Xvrqu9D7SyjKAH8LXM8a/+YC4wb6j4SoKziy1be2lRgzwGg0QEXQHwB2EwftATpriYxvdkP8046gaZHrDk+5BleMlaOHfojsWBEV62iyUZhGFiXzIaaf9pavPDEyM/PvOj5At3IXaXfoZ2VeYEk213YdPPw8typKLzIVuC60dHIsBj/Z+7kECWboKgGbX1ZAbT4sRLok4jB1jzFUZZgfWQDW3jmPD+WaqA/SNUgWidGSdRiRoK1fksjdEmSKEA+6hsqqUf4aJFPfseFIQiALcvHrML1VDqyntlGWrHu8fYsYug+naubQ4kNUGqggG3FQWPwxs4ytmdImeFp9yoEZuj+EUggSF2rJtzkE4U5ElDb7ikwJXEP5nHUXQPAmHgOb7a84Dkr0/42SJD3g16R0yKGYC97zs2Y+iEqTp6DXL8cNA0s72J9AcBRcRilMWP7QGQL6InUqmQGr3qXkVRkXWlI5BlkY2UIVh2BHNpwX1Rb/6KmxNV7dZVAh0h0gjhHYnNt4/qW2JrdRrBDoUmE079FBVD5EcDlbhu4sSQ1sRzAHrzLHFAB73iL6P2dFjEUdy4y+8KTqGd7TOsyb2nxGahnAOLeFzMotE2YyGt1r78BYOqK1Wt7b+a9cbBk76H1Q4+jhATBma9J8ez/y45TdkEi0SeGGWqbGB8IpTwa/k53GIvQ3nVRNNfYLTkDE4CtNKuj22Hz6Kgng/HLuErajKuewb24r/T8FtFqFcGzobLNRreOxX48iJwCW/9i/HNRGtpUvOH1dAx2G3udiOSfW157IyggdAPzm7VO02qM1Jh3YpPVCdRdth5mRj1s1x/vP3ex7r9AbAVEo+k419FK4A6q4CpCVZ2ZVHc16ew4PuoSP/CgoO5NJ8rB6ZzDQhurDwTokhQeKsdYp61bVPfcCpDmSHlxCf+y6qAp7uI29W0hbBlfo3PfLm6qYf7RHx47w3pD8mtfgi83vzk5D2mtXnrIRmJ3eRzI39e5lu388IVijOn2StrWHvZjB8oued64Y2PJz7UszKFha271aokoQ5IYLlCjN2ZQl9gV0zaKTBxgvp2e+E9ummBQ5MIgQGfONZAN9nB+i+nqU6EhPlJIgTN4YdtxjzBiMKAjqvmeC2tjJm1qa1JdFiS7p5grJv+n6pRG7YakxfWXbk+MrQDBfj7z26S4AWkD88j82EMCf1phs+1SArCQlBsTFRLSsoW1mDlwta2u43lwU7dCrsSb+VeNLpdbGEBlHxq4yfrdwaYdpQY8LBNQiYrq2uDUqJsRelakJA7Ys+/H712QKEoYkg09WOnZvfQEeoZOpDNGVtcoMEqPy42LTr59Nqttl3G5v23frW/Cw44Y2b9hx1vbrbkKYxE1rlA8ImuJsKjyJuFYsV0+bncGHlAK2OuHcHIm/qRWtdB2GbzVkjV+Md85q18V3lbm4bZWr/tJIJfxNBHdudmwrliIaEMoMQNnKeqN5EAH0nNWV10/EK6HXPxUaZa6nGRKcA/s+CgNrTlyHzIU1KplcvWr50t2ofuaaqHnsv7zn9BI1YeQBqQNMm0sCXjpt2kHMAUz5GCTiJqugqAyXIn1pxw5KTxsz1HqdskytA52p1QJNaLcchLOgY34dt6kj/YDp5ehXN3dJE0ApS4iIpJCvRr+zgoCnQub457cZ985EnmwM5nzC3+p++Jh2YG600ZvuOGEwLZwoq4IUhBqO3j5pzCqKwAYQYj468y/LLFzUxyQIdoQzEMkMolVZIUqvSG2yFsn7fEkeBHiutFP5J7GztgfQDJn6Qnz/Mgzs5nCVFztF9ByBCFaGs1w68G+pH88YX7ei6KEvwdE0dO5EdylhW1Swz6ahsBDGkx6t5ycew+JOO5y1itCsKRR14bHkemXSoxhJyMr5TUvpF1oo16NdiIRGlLEosqbg14UNGY4J+mtJOHKc/Gsna6O9oqVFloJavylRIY0CHYJZNoB6XwG7ibK3DPH0cMqUDXdfGLZjtlc6dCEOvITXZtwFi6cO4IMyPiYO9+fQ5H96a4BI03pCEbTGzDw06uWj4im8VMnQAAAAA=" alt="updateChildren"></p> <ol start="3"><li>oldStartIdx 与 newEndIdx 所对应的 node 是 sameVnode</li></ol> <p><img src="data:image/png;base64,UklGRq4hAABXRUJQVlA4IKIhAACQmACdASo7AiMBPpFInkulpCKhojPaCLASCWdu/HA5bZfnKazxD7MeavqNNXu9v5H6v9J+sXuV/xfKAe6HzAfrl+0nvseiz/eeoB/hv9H1jv7AewB5aP/e/0Hwlftb+z/tJ///WevIf958Iv69/fe4386/bfyR+ND6yxl9WX+76G/x/7PfjP7P+5PrX/mPzJ8x/j//Q+oF6x/yX288Lbr3+89AL19+o/7D+2fjl6F39B9mfwl9af89+Y3+A+wD+hf1T/HfmZ+//vE/rL5Kf4f/n+wF/If61/nP8n/kP2R+mz+Q/7H+S/2f7qe2L8+/uv/U/yH+g+Qn+X/13/jf332rf/D7k/3V9lP9n//+NpwnE/JIJNHqbv1ifg1uytnUV/V58SynNCa8vo98vEYoFQIhiwrZoUAaH9hrZUlKUpjk45IJ8wLAU5jO2xOcJxPtsBBNN/+uIaMBcR8FVsrvSnJZwFjVo7sFrRYZzCBcI+BcIq4G4DZCiZKXp1xPySCUco48I/qk4qHfzszVcT8kgfTzfyhLKTtBHwLhOJ+SQSjuTQ3V3Nmr7cIcm4R7mHEumFuM5B8n7Hkojr10clfJ1qSTW70R1vwOSyWxv9B+6ZNwj4Fwm01EGMfDMGOgb+qURQREA7v862O2rXtT61aukCN7NbAifkkECHKdE/g0iGQgXCPgXCcPqk1sSkd5cO4JRyXY7FMm60tNANBa922FUJH4PIHlV9+VzaM6UGzj/iTZev/mXTJvW6BYw5eDwIoVV7gRCx3M3h8B2LGK4pURM+0D95iFAqndCZlCmoYPJykSMeanbxoci4gdlJiMMFuclZSe4d2DNIrWYE6VFk6MX/gU8XpOpG68vcn9vcxeIaZy1hGXpsKy2bM0dVKrCXgFN9ljgT7sTNkY7kXVVTYpMXnFDfaq7Dt2WZnRNC59c7/QQWkrjFRX8kmrCB11SzBSJWJCk7lRNaD4Oc1qnPxDoYSVaiN7hP78JzhzKwGHc/w3gI0SipUpMx1HAkhNzEv2gV83RrQDhXG115XfDkG8gAouKeXJqXdXAj4Fwjnx7L/glHJumk50VWcJDlOTcI+BcI2ThbJQR8C4TifkkEo5Nwj4FwnE7Cfd2Vs+PmAQoTWK6N1AtFJ7EZP/Ppn3eQid2oQWf3F7MJE5imUZwXIViAqKuJ+SQSjk3CPhQ7xPySDlOTZNs7x5wnE/JIJRybGzqw/8k3iMYIsXBOTXz131jSbr/5KT21sPpim8HO+aqDIk7umhwfF4ihOL7gCaueuT1c/CKSbewznCcTtTBraYVRD2k6wRIRICUT9mQS6JfbAzxYznOrA40aKEMahG9StM+HbkJ/llptm4FFYan3zvoEUqX32oSZn2TjAQtcdPXidhKScnP285rifkkEo5NwhYn6CcRhh4BzoLajgVw1uthv+KS3RCI5yp+t8bkgZOguCAqyn4Lg9axRh0j/6DGBfIG+2TkppkHqwZCBcI+BcJxAQbKcM+fAuipO8P7a4A12ghcI+BcJxPyR9jjJMpDpHpgUrVeUE0GtwT701N1k+0YEUQSFwO79Q5NvqqiaZBcAaAjJR0/gqB/kqU0XDbQIYlnYxJ/WUbZKYrgyEC4R8C6ON+SQSjk6BHwLhOJ+SPkAD+/2KolSbbd2dRqRISCeVzrsOgjWFlGo4IoG2m4J95gsZTckjuyoWtUOeM0i3YgfEIkBDUad3DVNChaeZDrG8Sf5RCSTkEhneO/879T6uTt2PkyjtZJiQiOqk5gbVYDw8jlXtB7/mVFBoYkDeNka01/aS6dMIEGqAtlX10vCk6yw2sAPufTxKBNJlIVlXCQYnMfzY4CrT1oDhV3JiVvYzUC1GV2TuaFUloV1vVs1FwfGaIjVuc6gBS31aCLEZ+xbV3z35eMvMa41LX4HS5wMTinsGgE1Ntq/kRGW3PKjm2Mn9m7FYoSNJRYQpIk4wW/ipVnc76iiuDNndVD2AOR3SWG0OMuMuTNvqxlHPKmmAfylWv941a/18Y82oyRPv4Is1YpgtAEwYQUPGkmmyQZoO8QYTim45p6hGfa+KYOyVvRaZzDsRkU5TIEn877CSIQLl20Od19o7XJG3b/jFK48o+zNbIT4KDJlu/bip5ya1zUbnbKaFVngRFOcOJbJM+OXYmV6WVl7oC5RdZssFROyx+lEEkpKcFVSVmzt8MedKFVl1NxscYhNEEystVB2a8uvtyRMVrssMhjbupAOZzDPJ6tD6tUlDXT4/Djfp7yOJQ/l7hAnwpI/ZidWd033JgcP85zz8fk0P3xdyWpTTLWEp4hR+sAHAjVRRdA9252h6BfVGm33BMmWpd2bOXJnyuHjYQvZ/pM4GZHe1b6DnqL48I0JitUaNkOb+yfTAZcoDaZ4BLj8whhKmjRpt9siRWDJlLDayCWaXACtkyIgevuCn1GH4YRiR0bFG3fB6WqJ+hmMqlq4UFStmx7yUUJlWAXbRerTAkponWJQuNnNofjqESJ4AAAEY9g79Iu0hUoc9J1Ix0vTNUpXSJGGu43D7GnPwhkrBB991LgF8uTAWvq9lYzERkJO5HNep60FDzxHyAIHO+Rp3LMnADsdcDZDWCxJahYpD38Qz8lsRDayLJL6GMdvsYdG1IP1NKUx2fOtD9Y3dIsNBaDUl5QMmm8OJhV1hvkIEj0pX52s6GgxF1YDPEkgSUHegZDpMpDnlDBLcTXbI/S7jkAG6XZT/NED3batGXVVTA0UkRVUlYWr8tahsrF+uwMHb8JGBm++vpaqYAANVFX40gsLCPZpVGnnPcgB6iLa1xUDDsXNJk/AEUCbNFeAtDQbDwF9ImDa5reYvWNOZ62nh7wtw/mkhf7LESvFJT/WGr1uJlfe1VRlAeM4E/q2siCzYY1vogpgTlbuLzIviPVmYP+BCWAF54qf5oXS8yiBwEJfdP1EJ8HrMzn4wi0iwYyveQvloSYls+mrAYqHnGG0kKH9Z+AAcMk+GApt5VlTXDV3ry7p6NYqleuD5mq69m8pKKOT9wKWvIBcmmZjcVthm2vy8LpztJeSlbolLsMZA/MLjtlKrGSdaht6FWfLmKIZP95tYljc1ytlK0nY3yZlPjVWEbOwdEp8SPzJHDoxSl9+ELewLbJzCAXNbZSKVuhMUga/vjRRvX3qEnwhjhDr15lliaapVYCKTbnyxa165hSfM65zz4iUGU5CnROcgd9LqkP+qtIL+R2SXa2H/SDDbEbdCsNjqnY0N3NsH2U07o/CE77ifz3GWhIRUm42/kWLM11PbdbQhBErD0YfA0j/bbajk7VYX7YWvF2ijP+bQHTPuHRVxa2nkP9o0AjY2EEltbdeu9hdAWb41eOkPjLxo0BrPDNuGGeqQv43IVqHkhJ/ZbIPtKMR005r8O9YSgUKk7e6udsXJPWEwAfhxBWdL9tlup/XgqHh5JvpXiCYLIb/5HQgNHK8+HGD45Et0k63Yyn5bsnR+cB3ZsKB4wMqfGFrgY9nOMxOUNllzAH/BOjC8qV2lZ8cjh/4YsSx8nHAd1vcK+5v5gfIUZpke5cL+yQ+Di1XfSkYbh/Fk1KKhpeoQ6FE4/9TzUxmytyhaqdcRRHmw63SCQKQYB21PSmlt0jSbzjyS40dcpLIlVgtXrOQXg8nZEIME5ox9o/HpoN0DZaR3PZcp4xdNXpB22rkg/4ui6U+9ctvgwkAR41Jc4lYIZH5QLfDyhxLgWBCxovc/cZqG0swUAS0LgSnL28tLtGNYunFKg1xzhEIVt9dAuJY4vHiuE2v2ot3snme3YeUC2BfOUI4XcLnvo7wr2K86iAH6sNJJwzrU0A1icfkoyMX3h8YIUjIxMaH9a0YmrOhTstq2kZv79+d5TvyJEkKi88/4983L35p93fPmQsUOag/FRAzdCeJpPp5OwPmVCK5g4xATcwyZ3G7f+H9CrIeyBKMOdZuowvtJnOhSrI+1Yjk6p93knKTID+lalT3hshEN8AZpwNYNsIuvHzh8dfYgPw9NYDBVGvP5cGgCQRGwrKmmc2bpOarYr5fzvOlFguPblICZYzIwwOHWmwqLrVO/NO5tuc4xRG7XbiZq2TzjqQVw2/bpcLA+2xnYyHMdB/NxDy3kxhe5JpB8bW4i002mnfvf2+zW69UG7VTTtmsPtWXyqPfU59XyzkNMJwfB2kO//7//Y9Gu/AWMtUnBLaaYdAjjo5aG9EFNoksST4BkRFXo9/uWhvRBRRQ00p8A02cIGTVNvJ2guc4HvUghfWGkYX/ze6CByuu567Q9ABSXJYv7/+Z4Oiqj8qoVnitIIQzAo/otY4o182F3WOnUJP8ThlNXNk6gwgx08UKXoMcKkGeMp1/FeLH/z/1Oy9mvBYhYbu4qvgGE+Xs6IAO+Yymy4Tf76l7Hshxz4pL7eFf2k3F08VIu698de2QYOwWaKtJh05m2cDWQgsOeTXppvxEuTUjfii4WJ2Evew/wE20xQd14lrVrNTCv/d6kshpUQZ26rrXaz3GzTBRDb2Bt32G/sC3bI6lFMYLuGIk/RvErkpmAirL+6o49kN9BZinOmBKCNrAwRqcUfyZMu2OUec3xKTuerx8z/kbDnEkF4JrdAuNKSpFFt/HffuAJ8PY2no4NFQT59hwUmOg0KSsRIKs/CXocvJUTUOjmvTdre7biBnaX5YBxlXdM//LTnIlE3tS7cIs0dsK62WT/ZDI7mdqELpe0aHRx7Ib6CzFOdMCUEbWBgr5amMEt50nx0Zit01B1+pcw+TkFfkyZZnxJ2xIlqoIB8hSEJ7MAOHjpYzT7mVNhKy4gNqAj0kTMlOwVBSu2WuNBVAEIrBGGZGoU4jJqx4G15wmG+J0J2RaGaCz85LUyj3NkWnLJ/shkXbMDmYudVv+te6iQiO/r6rlqYwS3ncLkDVAzZlQpE/bdOPkApkDmI78mTLM+JO2JEtVBAPkKQmOF2GAIkPTUORMRIgpQEyLvKcMQhyVLg8pgb/Yrsxf63u/TsBKo/5Q3xWy4u1wU4IgRsndxsljjjt0u6K1rq5bfMnW2VBU0H+9YLLNU+6WoG93sPukangE+MDP1Ub96n31gaATCG+9wizR24NWfB/N2ti2/h19tjGwlFo2j67TtAHlEdlCwIaPZzY2LOhLJXAyFJfJElEYy2GCgKLZFMHyvN5qg1ULcLBKd6XsnQSGGxFYQFd/3Meph+ZcH98B/ydV5bMXMy2sQlAKXjeMAof2pSu9ywJkxJfEinpuXqU97mZudtPu+G1Si1KK87fy39KmDRxRbJJUWLNwF2HXkaxj5vlJHKwvOl8r2iHjNZ75jQH6ihsa/RZsOvkmQgfUM85BbKDttmJb5StGOzJQcWju2Um3FHU/LXGNJq9rS/+x9IJUOIcfid1KJaHFe0d/3mqS5HOobH2Pl0KZ73P67f4eMfr2LEuyDuMxbsOkTFVFQvf9iOsXPYe4NFOH81H/2v3EqY1paiek9nauIP4gOI+1Sg9VTdWgbczvhhnTOXLDaqfRzN0tpURUt394tCcdTp/bWELRFNOAfzJaUfKo3wiqcKavylXRENopeLOghk2Zefw9l77xEV5YKhqYqLHCGqx0b9yrqe7Kd6/RkpUaMcF2+bt26LGt7Q4o3BSxZABV+faEhwZ9LVBWbPWR486zb9jTke/0tR5cUXyYv01/Ncv54uu9JrB+M/sSrt5UsXhKDxyPHONi4qAanQXBw6jgnfVtScv5uoKqLaoO4e7Mha1lK6fLFcGf89ZAqFHoH8STnfNCR2r7SbiMCaG4LPpk1RsTT+zPLSQx48svNNPXfYRSdJiOYBctX83rZnQQAUIymNHQ3KheOddx1aHHcgTkr+7X/fL0ajHoCT73mofyccbZ/EOqPvi/qavnOBBZCXXahYEb4EpgOc7xD8l6z9JjZdCDmYBaNZMMzdvIReDtvt4LYqUWK2Eq0xk1V/Wa74Bu65W1Jw2lnVUkOS1LZ56RLdyGDxyQZlTpiRERsejWIfYMBYgr0JEjh4p/ufjLO0qbIYx+SETOgDVG/CcCSw02pxfAvuOnqxbRc56AazX/RqYkIV4lXN0LkXFesB44v6fviBqo16oMDayNgC9iKjT7tpySxGWls856tkKQbY0yJTedzErSxHuOOqZXV0fpGOvxTq6oJlB80Ys7N61MJrDDWQYebs5TK3eGXHpy2YlURWbS35R44k60Oig7+/N72ie+uLXqMuW2Yo8VKkoLnhdI9LhvY01z0wfI7drvPtZAZl/saGOL+n73dJSE11t1yyTOADFKj/oswM4VNaZT1sm6wcjSCqvGWx/HW2jRO8RYMHESwWdzoM9xo8oONDTu6VjySa6Uj/3yHaVgpO1m46D8SoHICWYwJWkTBStosEWxJ8u8pthynZVzd5ejfW1ZRg9VzC/h/juvnmxdQbLu+QWeuaGeHv1Z2WDUwkLY+4d6nq0/TwEK+8AinKxmEKGWIvaInKeHIBcmMgAut5TJfBavhKiO9++0sirlSXl0mhPKivRAVdjPUJPXNVB20quOGznLKRiubb0KKnulaj9ryZXDt9C07/x/CnOYtWk701bi9yckMi63jfp1GN2VIeqQCjybjsx6U7QJj8ExVA9x3voaNqpP5eHcExWW8SHSKgtK6qQzYgflqA5jzjV6thlPE1oWvRMuM/iHLyd3kIBSncJkLZMwOIAJdeY4GK3NjCIFOSuFDIknxaDu7rhK7ouwUf+Yiqga/BS/v18Sqyig9qxg0Ag490soxCx6eQ8ARqU3fYOqvDyRA0uhuAAoZChX+TbJhw60KpZ11M8YfDNS4OO6zsxCsZ/ofwLUORavZMNaa1R3WHl+GIgkjaeW9QlKHv586oUPE2xrcoiOBitzYwiBTkrhQyJJ8tAqHhgUaHcicRMwQhfHNRSgJ8/xPXFUPnymOnVa7ZvGwBGpTd9g6rHplk8FqzFp47Vrvu/gGJhk0iN6LLKkaZogdAxVwBccZLlI10tzWxgC13dNyH7vZoUDLhL5IPWkg2SvuYQSEd7pzkAjHqq72DLxj/Uq4HvaCKI8O8wzLQFHs148AqNMhD/hCVlKnA/yi/9rrgNv+fC+mCGhajHC3EMe5aXA91RdmsxaeO1a77uGVuOhNdbzlLooVfKTJf8oCCsrUx4wUzAMtIdnD2b4nMLUbeEaic30kwduHWRfK3JxEM5WdfppxeYEVtdNo+QKBeYJyAKd9cpIkK+4uQ8rkXTEauOWjLQaAGhPgw2lwT07ReMA6UXfeG/xVjgV+NMndl9DSjjSzQ3ghLPA1Ke417dafsufh5vRsCSqAbrOpI+0m3kQZxZHv+REij/pzgAAAAZ/UAcrF8gMY3tIo/pvqwYuIKv7Q4AARSRihTG4r8Ubb2fCVih7x9Na/F/PfWyy0pfOGqz/dcjHQq5YNLX6BoywaBRFZ7Rcd5Y38UV289AaJTXnA3OrDCU6von/U+YfMZFor8XwlFxVzTN3tpurDdo8x4oS0exGWHxD8pQ7JM5fR3AoMgRiLfvfVIlyHuIOpJDxHGeSO+OfQSBD0aczncVU4KGE1HowBsEkb5EYH1PfqnoNBE/5CyuZ8y5lOrLc/IuFzhrxebn/3kTZ5wdadPRS0yovcabPeB9Obmo/AbJrEKgu4x/JHQjLYgWOTwF63f7b/GC/KpZqnlI84h7b7Q/GRUFAwJbfTlYIJNzIl70Oec/cP8BdgWyVvcOuNDL2Y3XwWytLSu+MKtT/ELWdEV2x5BWK+diAdd/80JXc5E+NlqznS6NvXc9wXxdIWuacH++jFPPFJES5+la6+KCZfQmeR0vbtRWL2Dfl5VqxLnu+ax7/+02tASeJABs5VjP1eZqt9/Z3zEBUV0UE1QgV6wuqgwfWarujHoB+655fDWD9UW6PQS65E91qXp/G8SOXreMS2vLzqk9QVC78kt1EZ+6qLh7a2NpAC5/y4KD5vkESDLKARFBEcpBDxhpDpM3fkAAMNHxfF5W0XK/fwYd7qyN14z/duiBa/R8EghzpDYQWaunRSoRO6RlfYWj6xQx7IwneJFvUeLd5UvkKtWev+mLBj6644on4eWzM1MFVaJTNLydLZhU9H1GJMnQM9Jpc2aM5qqgrFAg53UjaZ2iPbL37+C0GSU7wsjRY1wBsE0ijsOlvFbl2Z2XWqsm0EHmf5SYg1MNpODS7vhOrwvawtLMiwYYX36eJc6JXWpU5kKB3KGRgPPTj+aGnvrHrxcWGJd/4UMQC6argkjlhSvW3UabeZ01BNfBcgKmw+jjvX5CrW/pOzyNLu/3XgUHw8tmZqYKq0SmaXlLaA+dXm0dx54EMEB4h8zNKg1JetAoCD0UcoI8bwYIKvPXa9T2SkkxS8RgI09BGjf0wuptOkIpCfHa5G6JTQrxAizh8IcdViQDnEGr3WV7Q+ZsLT8uIDxKbG59EM1ms+eLpXsx5CDjmrxxOp+ChQdL3LfkfbYb0xmWI8CKhzEZhPo+WXHxjM/tVMN7eZkYlTFatNmDMn9+yXGW4o+HlszNTBVWiUzS8x3wfOrzaO488CST1AH5CrVnr/piwY9XOAIoT97hlIrX0D7ArbBskz9+qjArzoo7u8aJPLnekIYrmfbMs+Upi5C96e408rfAkDFA6imOC+ddgZ0e1OBGkys9ZHEGh0QIJJyKcB9865AKtPwhrqYXWHW1NBodsqVPmmsK1pOSbT7ivSWgjwnliPkI8A3yCgA/CNBi4surLcElLWr1RE7RHQKlwHvU05l/L/4w8xfSOe5H0lJJupvFgrynFf7S9Euod/LxJWv1kqJEpYiwoUpTKT+bGRYbtM6NU0U8zjWoU8vEB8SmnbG1Us35rjzq3PuMUi/F++KDlGRS2Nrqddy2rn2SRGXq1LUCHj7/11hbajLFGoqrhz13AuKM+WDlVOVG9p/HV6YVYSRwtmeWcrGjq1qTNqrLlbNd/nfEJzi+jWicaA5c0W2bX4p5qH4gYoSe6jtX01xKymZyzj5cCzGghP2z+bsGQREKW/TM7PtefJgyHaHrP8yKHM1hHVgFtlfePZEAslVuJLewhBKS2cCIghIMUSTRCLCgBDYTp/f6M0xy/6z6IMFrMyyoZ6EE0ZvD0nE4GuCn037jU4lCZCF59n5zt9wYNVm2S8MO8kvfXeciUBWU9NMOZYHD46kUCT4LlJfjrv9hs0IW/fetPu4NpzngYaF6bnIyDubdD38hTIDeGSFf7cFrwhgJof8hRifT4QIb2IIRPWgSANIrjwFFPgCi2Jw3dyTQdUhNAGH9daYnbaSL+1wp6d+POo3XQFVNO6WoUq3HJCIoGYw+XZyRknuqCg9BpcUYhNjE910QBrbaJYnlNxOgBsEKpSimViabE8MNLqdWXGgv5aJcYmaVxNsXI2sw9l29t7lGWVxnnV6xlWvMCB7RuyF+P5n0Tiek0kUnrVnP+cjezdHRZMWjUoFSwgVFmGjK6xpedh2gKzfjvahttCRtq1ByZjOcCEJkixguOp54Hjced+3OtfoSfiSMz5vpL+aaP8SmtgoBbVu13JFsHfmY9VZrjjr0pRon8ef8LPLcQd2teDDySvv+pDwd07ftXXq1N4X0ABtoZPD8hAFMEde9zfequ2u5ncXnvvm4MIz5oTf4W0j80s52U+33AXpk/my7C0+FGmglZr8pSICeu12ENvx51G66ANMFievMLTX6OgDhydDZp91G9HAIJSZeGQiLzn5KlAFYIAXFoq9IFg2TjPnBclMHMOcilTDln27qUgXBWb+K0/UWaDU5U8HmEQqP9WENagouly1/VAp1uhgzngSEbxBXxspPjahlc5ANh/YyU7pGYxF0yx5blg/BC8f92ZWwt96JQp/rHZEb6k8STz5x2L3o630pmSoORsXK8GxlyviM+BAAs4IxkGbC+8obyMiBjxtg0DAWeckCNKm0LxNXg6AP6rQk7gbxwfLwhwhTI0UQvJtvTcAje7J76NhcF0y10PsEvcyB/RHkF6mCvQ9ooVDNzq7GH3ZISmPCdxmHKlZ8P7AMA2nm6IQ4vRO1KIUBfXSChsHrbSg5hICyD9eA7AUWoHjuaYNLHQUzJzB765grCpdG8VEdc7ZYIGNp8F2aNyVZY+TAvtU2pYFcJkrSjNVuRgDzi1kj2L/ww691YGrdDBqmYXaUh6KCqge7O6TYNk32HJ2pBdRLRECV3amh4VNXNZ7n0oI/+M+2VxS+//WIGK8b+jiXUKoI9AwDucdi96Ot9BQyPBLX4QxxpJlsrkk+C1EiT/2LiH5+n5rp8bmARSyuDA+SXRT0edc6qMP8m+4shycZPNSOBNKCiTilfIk8jWHkXIxFSTilfIk8jWHIBsrEHdu5VG4qtjfQDtgrUlR96c4g7H6baQir/4yFMu9UqA4cuKeHvoFErLMwlMTR9JKfkL7M/p/Guz+EFoV2WrdVMQfZIbrDDrs+DRTHa8pdqxXDK2Ija69ZBGaIwLdw6jjNmkB64uAjg0dKTjf/DW5XBRMltdA44XVvpp4kuih9Vape6jVOnFK85pY2SCLnMt3XFV4I/P3MJ+mEf2bFyY+dzo8gVH9y/mZnXHJXeKiPYFwZN0ziRyZZO2KSRfOF8UUP3e2JJ4fI8xLnyGbSOGB9gfhRd5WJopsm/HSLUzSu4EtKxF6cEnqE2ws0Ry7RK1zyt8xTJL2S8c4tFrusEWqAO50hrKOmSQToDv47j5Nl17W4KXfDYnlUD/Sb5Azd79F+au2TsSebDqP2cBvCCmbkurcmTUyKSyTlPgphSqU3fO0yRvQmTuj7tmOK/cPe9vahXJV7yfWo3ldYRMWjhWiBnKVamHPwWck9QNxlekxd28mkl/d41r9pnqheYjnOVJvWIkl5hOwTn4F+v39xScpfU7ZAxA2Wy4hIT8QSqYBVn7Py9bKBjX+edbpuHH/McgeFbXMsG1bv7cSC8vOmAM3ua5xewnicC242SCL2YUA47PMlxnqObUbEY1O3za7GgX62NGWjORHf+K+W+P7pf3FLJzJMgyc24H113VdLfzUqv40mdvj4xaIRvsqqXYlBrouH/3+QcdNuYsVE/m+xHCgKGJtbAm6MnckkETQl+GpXCK5oBP8BYW09WJaFX0bfaXgDCfGyJIsP4uCi//bopq5hZCibZTpaR+WgN0gHHszN/moVpA3j8eWU/OkDZ1w3DS1JYw0Pw/tmVMVaAP+yoWWZSb69ZaPgqey15g9VZzsdL3vNRpeFzNGQhj1D0jV46QmsRz/FdlcECB5ATnBg+2bmW1E3pF4eZ/06v2pGRDi89wlBeBobeG0HJRmmSmOGcWWRf/84I+dAFo1pFbnlP3tLQmJY5RpbEVyL5NUll8/im1aqN8IqO6vr9p5eJGfqJxqDkh8gEsLIKGpzp8RFeWCnImKiEsPZyycSTENrHTF6b7oNHmXBhKv7XwFfHRzgvzwRZ7sxbt8loL+4DDg8UleT9QnkxYGiob53uOvTZmAtntI96s/WYa/d5frSsa34PzztBRL6iWtGEHIAAAAAAA=" alt="updateChildren"></p> <p>这种情况不仅要进行两者的 patchVNode，还需要将旧的节点移到 oldEndIdx 后面.</p> <ol start="4"><li>oldEndIdx 与 newStartIdx 所对应的 node 是 sameVnode</li></ol> <p><img src="data:image/png;base64,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" alt="updateChildren"></p> <p>同样，这种情况不光要进行两者的 patchVNode，还需要将旧的节点移到 oldStartIdx 前面</p> <p>如果四种情况都不匹配，就尝试从旧的 children 中找到一个 sameVnode)(个人理解: 此时循环以新vnode为主体)，这里又分成两种情况:</p> <ol><li>找到了</li></ol> <p><img src="data:image/png;base64,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" alt="updateChildren"></p> <p>这种情况首先进行两者的 patchVNode，然后将旧的节点移到 oldStartIdx 前面</p> <ol start="2"><li>没找到</li></ol> <p><img src="data:image/png;base64,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" alt="updateChildren"></p> <p>这种情况首先会通过 newStartIdx 指向的 vnode 创建一个新的元素，然后插入到 oldStartIdx 前面。然后newStartIdx向后移一步</p> <h3 id="哈希表优化查找"><a href="#哈希表优化查找" class="header-anchor">#</a> 哈希表优化查找</h3> <p>当新旧两组vnode节点，的头叉指针4种情况都匹配不上时。如果新vnode数组中，头指针指向的结点有key。此时会在旧vnode数组中找和头指针指向结点key相同的结点。为了提高速度，用map优化查找。key为 结点key, value为vnode的下标</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createKeyToOldIdx</span> <span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> beginIdx<span class="token punctuation">,</span> endIdx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i<span class="token punctuation">,</span> key<span class="token punctuation">;</span>
  <span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> beginIdx<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> endIdx<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> map
<span class="token punctuation">}</span>

<span class="token comment">// oldKeyToIdx是一个对象, 保存了oldVond的key和index下标</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>oldKeyToIdx<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> oldKeyToIdx <span class="token operator">=</span> <span class="token function">createKeyToOldIdx</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">,</span> oldStartIdx<span class="token punctuation">,</span> oldEndIdx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
idxInOld <span class="token operator">=</span> <span class="token function">isDef</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
  <span class="token operator">?</span> oldKeyToIdx<span class="token punctuation">[</span>newStartVnode<span class="token punctuation">.</span>key<span class="token punctuation">]</span>
  <span class="token operator">:</span> <span class="token function">findIdxInOld</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> oldStartIdx<span class="token punctuation">,</span> oldEndIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ......</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>如果 newStartVnode 有标记key, 那么 直接 去 <code>oldKeyToIdx</code>查找, 看看 旧结点 中是否有和newStartVnode一样的结点.</p> <p>最后，如果新旧子节点中有任何一方遍历完了，还需要做一个收尾工作，这里又分为两种情况:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 旧的vnode数组先遍历完</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>oldStartIdx <span class="token operator">&gt;</span> oldEndIdx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  refElm <span class="token operator">=</span> <span class="token function">isUndef</span><span class="token punctuation">(</span>newCh<span class="token punctuation">[</span>newEndIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> newCh<span class="token punctuation">[</span>newEndIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>elm<span class="token punctuation">;</span>
  <span class="token function">addVnodes</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">,</span> newCh<span class="token punctuation">,</span> newStartIdx<span class="token punctuation">,</span> newEndIdx<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>newStartIdx <span class="token operator">&gt;</span> newEndIdx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 新的vnode数组先遍历完</span>
  <span class="token function">removeVnodes</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">,</span> oldStartIdx<span class="token punctuation">,</span> oldEndIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol><li>旧的先遍历完</li></ol> <p><img src="data:image/png;base64,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" alt="updateChildren"></p> <p>这种情况需要将新的 children 中未遍历的节点进行插入.</p> <ol start="2"><li>新的先遍历完</li></ol> <p><img src="data:image/png;base64,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" alt="updateChildren"></p> <p>这种情况需要将旧的 children 中未遍历的节点进行删除</p> <p>到此，整个 patch 的过程就大致分析完了</p> <h2 id="diff原理总结"><a href="#diff原理总结" class="header-anchor">#</a> diff原理总结</h2> <p>diff是比较新旧两个vnode，来达到更新UI一系列操作。diff大方向上分为两种情况：</p> <ol><li>初次渲染：总的来说，是通过vnode创建真实的Dom树，并插入到旧节点后面，最后删除旧节点。所以实际上初次渲染时页面会有一瞬间会同时存在两个 id (通常为app)相同 的 div</li></ol> <ul><li>先说下vnode分别是什么。初次渲染时，oldVnode是$el元素，即实例化vue传el参数，此时的oldVnode是真实的Dom元素；新的vnode是render函数生成的vnode结点。</li> <li>把oldVnode变成vnode的JS数据结构。实例化一个vnode结点，把oldVnode赋给vnode.elem属性，再把生成的vnode结点赋给oldVnode。就达到了oldVnode从真实Dom转成虚拟Dom的结构的目的。</li> <li>生成真实的Dom，并插入页面旧结点后面。vnode是虚拟dom树，实际上是通过不断的，深度优先的，递归遍历vnode虚拟dom树，就可以生成真实dom树。生成的真实dom结点放在哪里？不断生成的dom元素是放在vnode.elem。所以vnode是一棵虚拟dom树，vnode.elem是一棵真实的dom树</li></ul> <ol start="2"><li>非初次渲染。通常是由于响应式数据发生改变，触发渲染watcher的回调，回调又执行patch更新</li></ol> <ul><li>先说下对相同结点的定义。如果新旧两个vnode的key， tag标签等相同，那么就称它们是相同结点(isSameVnode)</li> <li>接下讲讲更新谁。非初渲染是怎么做到更新的？实际上这个更新是真实dom树的更新，vnode.elem才是维护真实dom树，所以可以说非初次渲染的目的是更新vnode.elem</li> <li>接下来讲讲diff核心内容。对比更新vnode(patchVnode)主要做3个操作：
<ol><li>更新文本内容</li> <li>如果新的vnode没有子节点，旧的vnode有子节点，则dom树中相应去掉子节应</li> <li>如果新的vnode有子节点，旧的vnode没有子节点，则dom树中相应添加子节应</li> <li>如果两者都有子节点，则比较更新(updateChildren)子节点</li></ol></li> <li>比较更新子节点，分别给新旧子节点数组，添加头尾指针。通过比较是否相同结点(定义上面说过了)，移动头尾指针来实现更新子结点。具体会做6+1步
<ol><li>头头比较。相同结点，则头指针分别后移</li> <li>尾尾比较。相同，则前移</li> <li>头尾。相同，移动旧vnode结点。为什么移动旧的vnode而不是新的vnode，是因为旧的vnode.elem才真正是维护着真实dom</li> <li>尾头。相同，称动旧vnode结点。</li> <li>以上头尾4种交叉都不满足。通过map优化查找（key为vnode的key，value为数组下标），看是否能在旧vnode的头尾指针之间 找到 和新vnode头指针指向结点 相同的结点。若找到，移动旧的vnode结点</li> <li>若找不到，则需要创建 一个vnode结点，插入到旧的vnode数组中（头指针的前一个）</li> <li>最后一步。看看新旧结点数组谁先遍历完。如果新的先遍历完，则需删除旧结点数组多余的结点；如果旧的先遍历完，则需新增对应结点</li></ol></li></ul> <p>问：diff算法时间复杂度</p> <p>答：新旧虚拟DOM对比的时候，Diff算法比较只会在同层级进行, 不会跨层级比较。 所以Diff算法是:深度优先算法。 时间复杂度:O(n)</p> <p>加深理解：</p> <p>实际上是oldVnode.elem维护着真实Dom结构，初次渲染时，oldVnode.elem会插入到页面上，一般是body标签中；
改变数据，渲染更新，一系列操作都是为了更新oldVnode.elem这个真实的dom树，你可能会问，为啥更新oldVnode.elem，就能更新到页面？</p> <p>实际上oldVnode.elem是一个引用。所以更新每次更新oldVnode.elem会更新页面真实Dom</p> <p>参考:
<a href="https://juejin.cn/post/6850418110911119374#heading-0" target="_blank" rel="noopener noreferrer">Vue 源码之 patch 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://vue3js.cn/interview/vue/diff.html#%E4%B8%89%E3%80%81%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90" target="_blank" rel="noopener noreferrer">面试官：你了解vue的diff算法吗？说说看<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/6/2021, 12:20:47 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue/vnode/" class="prev router-link-active">
        说一下什么是Virtual DOM
      </a></span> <span class="next"><a href="/vue/vnode/ssr.html">
        SSR
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e8c3aa62.js" defer></script><script src="/assets/js/2.1d5e0d04.js" defer></script><script src="/assets/js/9.0c30cda9.js" defer></script>
  </body>
</html>
